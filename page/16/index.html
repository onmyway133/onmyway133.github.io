<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>onmyway133</title><meta description="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:type" content="blog"><meta property="og:title" content="onmyway133"><meta property="og:url" content="https://onmyway133.github.io/"><meta property="og:site_name" content="onmyway133"><meta property="og:description" content="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://onmyway133.github.io/img/og_image.png"><meta property="article:author" content="Khoa Pham"><meta property="article:tag" content="ios"><meta property="article:tag" content=" android"><meta property="article:tag" content="javascript"><meta property="article:tag" content=" react"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@onmyway133"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://onmyway133.github.io"},"headline":"onmyway133","image":["https://onmyway133.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Khoa Pham"},"description":"What you don&#39;t know is what you haven&#39;t learned"}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-40119591-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-40119591-5');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3656459401405265" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/apps">Apps</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/opensource">Open Source</a><a class="navbar-item" href="/writing">Writing</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/speaking">Speaking</a><a class="navbar-item" href="/news">News</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-04-12T06:55:32.000Z" title="2018-04-12T06:55:32.000Z">2018-04-12</time><span class="level-item">a few seconds read (About 55 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-from-Open-Source-Colocate-test-files/">Learning from Open Source  Colocate test files</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/160" target="_blank" rel="noopener">#160</a></strong></p>
<ul>
<li><a href="https://kickstarter.engineering/why-you-should-co-locate-your-xcode-tests-c69f79211411" target="_blank" rel="noopener">Why you should co-locate your Xcode tests</a></li>
<li>Files</li>
</ul>
<p><a href="https://github.com/kickstarter/ios-oss/blob/master/Kickstarter-iOS/ViewModels/RootViewModel.swift" target="_blank" rel="noopener">https://github.com/kickstarter/ios-oss/blob/master/Kickstarter-iOS/ViewModels/RootViewModel.swift</a><br><a href="https://github.com/kickstarter/ios-oss/blob/master/Kickstarter-iOS/ViewModels/RootViewModelTests.swift" target="_blank" rel="noopener">https://github.com/kickstarter/ios-oss/blob/master/Kickstarter-iOS/ViewModels/RootViewModelTests.swift</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-04-03T11:29:58.000Z" title="2018-04-03T11:29:58.000Z">2018-04-03</time><span class="level-item">4 minutes read (About 563 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Using-CircleCI-2.0/">Using CircleCI 2.0</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/158" target="_blank" rel="noopener">#158</a></strong></p>
<p>We ‚Äòve been using CircleCI for many of our open source projects. Since the end of last year 2017, version 2.0 began to come out, and we think it‚Äôs good time to try it now together with <a href="https://swift.org/blog/swift-4-1-released/" target="_blank" rel="noopener">Swift 4.1</a> and <a href="https://developer.apple.com/news/?id=01242018d" target="_blank" rel="noopener">Xcode 9.3</a></p>
<p>The problem with <a href="https://circleci.com/docs/2.0/" target="_blank" rel="noopener">version 2.0</a> is it‚Äôs so powerful and has lots of cool new features like jobs and workflows, but that requires going to documentation for how to <a href="https://circleci.com/docs/2.0/migrating-from-1-2/" target="_blank" rel="noopener">migrate</a> configuration file, especially <a href="https://circleci.com/docs/2.0/migrating-from-1-2/#search-and-replace-deprecated-20-keys" target="_blank" rel="noopener">Search and Replace Deprecated 2.0 Keys</a></p>
<h3 id="Creating-config-yml"><a href="#Creating-config-yml" class="headerlink" title="Creating config.yml"></a>Creating <code>config.yml</code></h3><p>The first thing is to create a new <code>config.yml</code> inside folder <code>.circleci</code></p>
<blockquote>
<p>Copy your existing circle.yml file into a new directory called .circleci at the root of your project repository.</p>
</blockquote>
<p>Next is to declare version and jobs</p>
<blockquote>
<p>Add version: 2 to the top of the .circleci/config.yml file.</p>
</blockquote>
<h3 id="Checking-xcodebuild"><a href="#Checking-xcodebuild" class="headerlink" title="Checking xcodebuild"></a>Checking <code>xcodebuild</code></h3><p>For simple cases, we just use <code>xcodebuild</code> to build and test the project, so it‚Äôs good to try it locally to avoid lots of trial commits to trigger CircleCI. You can take a look at this PR <a href="https://github.com/hyperoslo/Cheers/pull/20" target="_blank" rel="noopener">https://github.com/hyperoslo/Cheers/pull/20</a></p>
<p>Before our configuration file for version 1.0 looks like this</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- <span class="built_in">set</span> -o pipefail &amp;&amp; xcodebuild -project Cheers.xcodeproj -scheme <span class="string">"Cheers-iOS"</span> -sdk iphonesimulator -destination <span class="string">'platform=iOS Simulator,name=iPhone 8,OS=11.0'</span> -enableCodeCoverage YES <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>Now we should put <code>pipefail</code> inside <code>shell</code>, follow <a href="https://github.com/CircleCI-Public/circleci-demo-ios/blob/master/.circleci/config.yml" target="_blank" rel="noopener">https://github.com/CircleCI-Public/circleci-demo-ios/blob/master/.circleci/config.yml</a></p>
<blockquote>
<p>shell: /bin/bash ‚Äìlogin -o pipefail</p>
</blockquote>
<p>Now is the actual trying <code>xcodebuild</code>, after many failures due to <code>destination</code> param</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild: error: Unable to find a destination matching the provided destination specifier:</span><br><span class="line">		&#123; platform:iOS Simulator, OS:11.3 &#125;</span><br><span class="line"></span><br><span class="line">	Missing required device specifier option.</span><br><span class="line">	The device type ‚ÄúiOS Simulator‚Äù requires that either ‚Äúname‚Äù or ‚Äúid‚Äù be specified.</span><br><span class="line">	Please supply either ‚Äúname‚Äù or ‚Äúid‚Äù.</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild: error: option &apos;Destination&apos; requires at least one parameter of the form &apos;key=value&apos;</span><br></pre></td></tr></table></figure>

<p>I found this to work, run this in the same folder as your <code>xcodeproj</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -project Cheers.xcodeproj -scheme <span class="string">"Cheers-iOS"</span> -sdk iphonesimulator -destination <span class="string">"platform=iOS Simulator,OS=11.3,name=iPhone X"</span> -enableCodeCoverage YES <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<h3 id="Adding-workflow"><a href="#Adding-workflow" class="headerlink" title="Adding workflow"></a>Adding workflow</h3><p>Version 2.0 introduces <a href="https://circleci.com/docs/2.0/workflows/" target="_blank" rel="noopener">workflow</a> which helps organising jobs</p>
<blockquote>
<p>A workflow is a set of rules for defining a collection of jobs and their run order. Workflows support complex job orchestration using a simple set of configuration keys to help you resolve failures sooner.</p>
</blockquote>
<p>For our simple use cases, we add this workflow</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">workflows:</span></span><br><span class="line"><span class="attr">  version:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">  build-and-test:</span></span><br><span class="line"><span class="attr">    jobs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">build-and-test</span></span><br></pre></td></tr></table></figure>

<h2 id="Collecting-Test-Metadata"><a href="#Collecting-Test-Metadata" class="headerlink" title="Collecting Test Metadata"></a>Collecting Test Metadata</h2><ul>
<li><a href="https://circleci.com/docs/2.0/collect-test-data/" target="_blank" rel="noopener">https://circleci.com/docs/2.0/collect-test-data/</a></li>
</ul>
<blockquote>
<p>CircleCI collects test metadata from XML files and uses it to provide insights into your job</p>
</blockquote>
<h2 id="Final"><a href="#Final" class="headerlink" title="Final"></a>Final</h2><p>Use below as template</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">2.1</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"><span class="attr">  build_test:</span></span><br><span class="line"><span class="attr">    macos:</span></span><br><span class="line"><span class="attr">      xcode:</span> <span class="string">"11.0"</span></span><br><span class="line"><span class="attr">    shell:</span> <span class="string">/bin/bash</span> <span class="bullet">--login</span> <span class="bullet">-o</span> <span class="string">pipefail</span></span><br><span class="line"><span class="attr">    steps:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">checkout</span></span><br><span class="line"><span class="attr">      - run:</span></span><br><span class="line"><span class="attr">          command:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            curl https://cocoapods-specs.circleci.com/fetch-cocoapods-repo-from-s3.sh | bash -s cf</span></span><br><span class="line"><span class="string">            pod install</span></span><br><span class="line"><span class="string"></span><span class="attr">      - run:</span></span><br><span class="line"><span class="attr">          command:</span> <span class="string">xcodebuild</span> <span class="bullet">-workspace</span> <span class="string">MyApp.xcworkspace</span> <span class="bullet">-scheme</span> <span class="string">"MyApp"</span> <span class="bullet">-sdk</span> <span class="string">iphonesimulator</span> <span class="bullet">-destination</span> <span class="string">"platform=iOS Simulator,name=iPhone X,OS=12.2"</span> <span class="bullet">-enableCodeCoverage</span> <span class="literal">YES</span> <span class="string">test</span></span><br><span class="line"><span class="attr">      - store_test_results:</span></span><br><span class="line"><span class="attr">          path:</span> <span class="string">test-results</span></span><br><span class="line"></span><br><span class="line"><span class="attr">workflows:</span></span><br><span class="line"><span class="attr">  version:</span> <span class="number">2.1</span></span><br><span class="line"><span class="attr">  primary:</span></span><br><span class="line"><span class="attr">    jobs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">build_test</span></span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://circleci.com/docs/2.0/ios-migrating-from-1-2/" target="_blank" rel="noopener">https://circleci.com/docs/2.0/ios-migrating-from-1-2/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:30:02.000Z" title="2018-02-27T11:30:02.000Z">2018-02-27</time><span class="level-item">2 minutes read (About 307 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Jitter-buffer-in-VoIP/">Jitter buffer in VoIP</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/157" target="_blank" rel="noopener">#157</a></strong></p>
<p>This post was from long time ago when I did <a href="http://pjsip.org/" target="_blank" rel="noopener">pjsip</a></p>
<hr>
<p>A jitter buffer temporarily stores arriving packets in order to minimize delay variations. If packets arrive too late then they are discarded. A jitter buffer may be mis-configured and be either too large or too small.  </p>
<h3 id="Impact"><a href="#Impact" class="headerlink" title="Impact"></a>Impact</h3><p>If a jitter buffer is too small then an excessive number of packets may be discarded, which can lead to call quality degradation. </p>
<p>Lower settings cause less delay in the meeting, but meetings with lower settings are more susceptible to jitter effects caused by network congestion. Less data is buffered, increasing the likelihood that delayed or lost packets will produce a jitter effect in the media stream.</p>
<p>If a jitter buffer is too large then the additional delay can lead to conversational difficulty.</p>
<p>Higher settings are more effective at reducing jitter effects. With higher settings, more data is buffered, which allows more time for delayed packets to arrive at the client. However, higher settings also result in more delay (or latency) in the meeting. A user who is speaking will not be heard immediately by the other meeting participants. The delay in the meeting increases with the amount of time that data is held in the buffer.</p>
<h3 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h3><p>A typical jitter buffer configuration is 30mS to 50mS in size. In the case of   an adaptive jitter buffer then the maximum size may be set to 100-200mS. Note that if the jitter buffer size exceeds 100mS then the additional delay introduced can lead to conversational difficulty.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><p><a href="http://publib.boulder.ibm.com/infocenter/sametime/v7r5m1/index.jsp?topic=/com.ibm.help.sametime.admin.doc/st_adm_avserv_audframepacket_t.html" target="_blank" rel="noopener">lib.boulder.ibm.com/infocenter/sametime</a>  </p>
</li>
<li><p><a href="http://www.voiptroubleshooter.com/problems/jitterbuffer.html" target="_blank" rel="noopener">http://www.voiptroubleshooter.com</a></p>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:27:46.000Z" title="2018-02-27T11:27:46.000Z">2018-02-27</time><span class="level-item">2 minutes read (About 347 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Some-Windows-Phone-7-development-tips/">Some Windows Phone 7 development tips</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/156" target="_blank" rel="noopener">#156</a></strong></p>
<p>This post was from long time ago when I did Windows Phone 7</p>
<hr>
<p>Welcome back, today I will start writing all stuff, all the secret I ‚Äòve revealed when developing for Windows Phone 7.  </p>
<ol>
<li><p>When setting <code>UIElement</code>‚Äòs <code>Visibility</code> to <code>Collapsed</code>, the OS set its <code>Height</code> to 0. So if you need to have a Height of 0, simply set <code>Height=&quot;0&quot;</code>, which is faster in term of show time.  </p>
</li>
<li><p>When clearing data source, <code>ListBox</code> which uses <code>VirtualizingStackPanel</code> does not rememeber its last view, whereas <code>StackPanel</code> does  </p>
</li>
<li><p><code>ListBox</code> which is inside <code>ScrollViewer</code> will lose its UI virtualization, even if you use <code>VirtualizingStackPanel</code>  </p>
</li>
<li><p>Using <code>GestureListener</code> incorrectly will cause other <code>UIElement</code> to not work, i.e <code>Slider</code>, ‚Ä¶  </p>
</li>
<li><p><code>AdControl</code>, <code>ContextMenu</code> may be a source of memory leak.  </p>
</li>
<li><p>Panorama control still enable swiping when there is only 1 <code>PanoramaItem</code>, whereas <code>Pivot</code> does not.  </p>
</li>
<li><p>Pivot control will load the current <code>PivotItem</code>, as well as its direct left and right <code>PivotItem</code>.  </p>
</li>
<li><p>Sometimes SIP keyboard does not show up, check your phone for physical keyboard problem.  </p>
</li>
<li><p>There is no way to rate a Song for 3rd app  </p>
</li>
<li><p>When emulator rendering has overlap issue, the workaround is to set <code>LayoutRoot</code> ‚Äòs <code>Background</code> to a solid color  </p>
</li>
<li><p>Supposed you‚Äôre using <code>ObservableCollection</code> bindSource as binding source for <code>ListBox</code>. When adding items to bindSource quickly, <code>ListBox</code> seems to suppress creating <code>ListBoxItem</code> until all items are added. It is <a href="http://blogs.msdn.com/b/rohantha/archive/2010/09/12/silverlight-wp7-list-scroll-with-items-as-image-description-from-web-bing-image-search.aspx" target="_blank" rel="noopener">advised to add items in batch</a>  </p>
</li>
<li><p><code>WebBrowser</code> control does not have scroll bar  </p>
</li>
<li><p>Using <code>StoryBoard</code> when ever possible, because all of its animation is done in Compositor Thread, which leverages GPU  </p>
</li>
<li><p>Use <code>ProgressIndicator</code> for best performance and UX familiarity  </p>
</li>
<li><p>Collapse unimportant <code>UIElement</code> to decrease load time, and show them when Page is completely loaded.  </p>
</li>
<li><p>Always unsubscribe to event source that  can continue to run when the Page is navigated from, because that may cause memory leak. Examples are timer, <code>BackgroundAudioPlayer.PlayeStateChanged</code>, ‚Ä¶  </p>
</li>
<li><p>Using file is much faster than Local Database  </p>
</li>
<li><p>Remember the limit 260 characters of query string  </p>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:25:18.000Z" title="2018-02-27T11:25:18.000Z">2018-02-27</time><span class="level-item">3 minutes read (About 480 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-calculate-packet-size-in-VoIP/">How to calculate packet size in VoIP</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/155" target="_blank" rel="noopener">#155</a></strong></p>
<p>As you have probably observed in your studies, there is a determined method for calculating VoIP packet sizes. The packet size depends on many different variables, so there is no great answer for an ‚Äúaverage‚Äù packet size ‚Äì average depends on the environment. Just as an example, if you currently have VoIP running within a LAN and want to provision a new WAN so you can use VoIP to another site, knowing how big your VoIP packets are on the LAN won‚Äôt help. See below for a VoIP packet size calculation for a typical LAN, which will get you started.</p>
<h3 id="Packet-size"><a href="#Packet-size" class="headerlink" title="Packet size"></a>Packet size</h3><p>The general formula for VoIP packet size is this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Frame overhead + Encapsulation overhead + IP overhead + Voice payload.</span><br></pre></td></tr></table></figure>

<p>Let‚Äôs say the packet is going across our LAN, so right now the frame overhead is 18 Bytes, for Ethernet II. (This size would change later if the packet crosses a trunk with 802.1Q tagging or ISL encapsulation, or is destined for the WAN, where a different link layer framing will probably be in use.)</p>
<h3 id="Encapsulation"><a href="#Encapsulation" class="headerlink" title="Encapsulation"></a>Encapsulation</h3><p>Encapsulation overhead would include things like IPSec tunnels for security. Suppose we are not encapsulating this voice packet, so there is no overhead here.</p>
<p>‚ÄúIP overhead‚Äù has overhead occurring at layer 3 and above, so for SIP phones this means IP (20 Bytes), UDP (8 Bytes), and RTP (12 Bytes). This is a total of 40 Bytes of IP overhead.</p>
<p>Lastly, you must calculate the size of the actual voice payload. Suppose we use the G.711 codec, which gives us a codec bandwidth of 64kbps. Also suppose our phones have a packetisation period of 20ms (meaning 20ms worth of voice goes into every packet). With these two numbers, we can figure out the size of the voice payload. Since one second of voice contains 64 kilobits of data (‚Äú64 kbps‚Äù), it is easy to calculate how many bits</p>
<p>Find the amount of Bytes per payload:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">64000 bits * .02 seconds = 1280 bits of voice per payload  </span><br><span class="line">1280 bits / 8 bits per byte = 160 Bytes of voice per payload</span><br></pre></td></tr></table></figure>

<p>The total overhead is 58 Bytes (18 + 40)<br>The total VoIP packet size is 218 Bytes (160 + 58 )</p>
<p>In the interest of full disclosure, it is easy to get a bit rate per second from here; just convert 218 Bytes into bits and multiply by the packetization rate (which is the inverse of your packetization period, in this case 50 packets per second). The bit rate for ONE stream of this voice is 87.2kbps‚Ä¶ we hope the user isn‚Äôt just talking to himself, so double that for an actual phone conversation.</p>
<p>There are lots of other little things, like VAD and various header compressions, that you may need to factor into these calculations as well. As you can see, any one of these many things being off will give you a different answer, so knowing how to go about the entire process is important.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a href="www.techexams.net">www.techexams.net</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:21:02.000Z" title="2018-02-27T11:21:02.000Z">2018-02-27</time><span class="level-item">4 minutes read (About 668 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/UITableViewCell-and-Model/">UITableViewCell and Model</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/154" target="_blank" rel="noopener">#154</a></strong></p>
<p>The most common UI element in iOS is <code>UITableView</code>, and the most common task is to display the UITableViewCell using the model.</p>
<p>Although the title specifies UITableViewCell, but the problem involves other views (UICollectionView, custom view, ‚Ä¶) as well</p>
<p>There are many debates about this, so here I want to make a summary, all in my opinion</p>
<h3 id="It-started-with"><a href="#It-started-with" class="headerlink" title="It started with"></a>It started with</h3><p><a href="http://inessential.com/2012/12/31/uitableviewcell_is_not_a_controller" target="_blank" rel="noopener">UITableViewCell Is Not a Controller</a><br>This article follows strict MVC and states we should not pass model object to cell and let cell manipulate directly on the model. He shows several examples that point out this job is not suitable for the cell. Instead this job should be done on the Controller (UIViewController, UITableViewDataSource, ‚Ä¶)</p>
<h3 id="Category-for-simple-case"><a href="#Category-for-simple-case" class="headerlink" title="Category for simple case"></a>Category for simple case</h3><p><a href="http://www.sebastianrehnby.com/blog/2013/01/01/skinnier-controllers-using-view-categories/" target="_blank" rel="noopener">Skinnier Controllers Using View Categories</a><br>This article states that we should keep ViewController skinnier by transfering the job (mapping model object to cell) to the cell category</p>
<h3 id="Using-subclassing"><a href="#Using-subclassing" class="headerlink" title="Using subclassing"></a>Using subclassing</h3><p><a href="http://corporationunknown.com/blog/2013/01/01/uitableviewcell-is-not-a-controller-but/" target="_blank" rel="noopener">UITableViewCell Is Not a Controller, But‚Ä¶</a><br>This articles explains the beauty of subclassing to take advantage of Polymorphism. In the theming example he gives, we see that Controller ‚Äòs job now is to select the correct cell subclass, and the subclass ‚Äòs job is to know how to use the model<br>‚ÄúWhen a UITableViewCell subclass accepts a model object parameter and updates its constituent subviews as I have described, it is behaving as a data transformer, not a controller‚Äù</p>
<h3 id="Model-Presenter"><a href="#Model-Presenter" class="headerlink" title="Model Presenter"></a>Model Presenter</h3><p><a href="https://medium.com/ios-apprentice/model-view-controller-presenter-8bb4149fa5ef" target="_blank" rel="noopener">Model View Controller Presenter</a><br>This article shows that using subclassing and category will have duplication implementation when you have more cells and models. After several optimizations, he finally gets to the Model Presenter, which is the center object who knows how to represent the model in different view.<br>‚ÄúThis is an object that knows how to represent every aspect of a certain model‚Äù</p>
<h4 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h4><p><a href="http://cocoamanifest.net/articles/2013/10/mvc-mvvm-frp-and-building-bridges.html" target="_blank" rel="noopener">MVC, MVVM, FRP, And Building Bridges</a><br>This article explains MVVM but it touches our problem directly. The problem with cell and model actually is</p>
<ol>
<li>How to map the model to the cell</li>
<li>Who will do this job? The cell, Controller or another Model Mapping object ?</li>
</ol>
<p>The ViewModel is actually who does this work, which is to transform the model to something the view can easily use</p>
<p>‚ÄúA table view data source is none of these things. It‚Äôs purely a layer between the table view and the model. The model defines lists of things, but the table view data source transform those lists into sections and rows. It also returns the actual table view cells, but that‚Äôs not what I‚Äôm focusing on here. The key is its role as a middle-tier data transformer.‚Äù</p>
<h3 id="Do-we-access-the-cell-‚Äòs-subviews"><a href="#Do-we-access-the-cell-‚Äòs-subviews" class="headerlink" title="Do we access the cell ‚Äòs subviews"></a>Do we access the cell ‚Äòs subviews</h3><p><a href="http://inessential.com/2013/01/02/paul_on_uitableviewcell" target="_blank" rel="noopener">Paul on UITableViewCell</a><br>Brent follows with another post explaining how cell ‚Äòs subviews should not be accessed outside of the cell</p>
<h3 id="Data-Source"><a href="#Data-Source" class="headerlink" title="Data Source"></a>Data Source</h3><p><a href="http://www.objc.io/issue-1/table-views.html" target="_blank" rel="noopener">Clean table view code</a><br>This article deals with Bridging the Gap Between Model Objects and Cells.<br>‚ÄúAt some point we have to hand over the data we want to display into the view layer. Since we still want to maintain a clear separation between the model and the view, we often offload this task to the table view‚Äôs data source. This kind of code clutters the data source with specific knowledge about the design of the cell. We are better off factoring this out into a category of the cell class‚Äù</p>
<p>This together with <a href="http://www.objc.io/issue-1/lighter-view-controllers.html" target="_blank" rel="noopener">Lighter View Controllers</a> shows a practical example that deals with most cases</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a href="http://cocoamanifest.net/articles/2013/01/should-uitableviewcells-know-about-model-objects.html" target="_blank" rel="noopener">Should UITableViewCells Know About Model Objects?</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:18:35.000Z" title="2018-02-27T11:18:35.000Z">2018-02-27</time><span class="level-item">4 minutes read (About 594 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Netcut-and-ARP/">Netcut and ARP</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/153" target="_blank" rel="noopener">#153</a></strong></p>
<p>Bad people can use <a href="http://www.arcai.com/netcut/" target="_blank" rel="noopener">Netcut</a> to limit other ‚Äòs internet access in same network</p>
<h3 id="How-does-Netcut-work"><a href="#How-does-Netcut-work" class="headerlink" title="How does Netcut work"></a>How does Netcut work</h3><p>Netcut uses attacking technique called ARP Spoofing.</p>
<p>ARP (Address Resolution Protocol) is a link layer procotol, it is used for resolving network layer address (IP) into link layer address (MAC).  </p>
<p>When we want to send IP packet to another host (a computer in the same LAN, or the Gateway), we must know the destination IP address. In order for the packet to reach the destination, the destination IP address must be converted to the corresponding MAC address, so the transmission can be processed in the data link layer. To setup this mapping IP-MAC in the ARP table, we must first send ARP request as broadcast one to the LAN. In the happy case, the one with the IP in the ARP request will reply us with his MAC address.</p>
<p>Unfortunately, ARP is a stateless protocol. This means we continue to accept ARP replies and overwrite the old ones, even they have not expired yet. Worse, ARP does not define any authentication method to check whether the replies come from the trusted one (the one we want to receive the replies). These offer chances for the attacker to perform ARP Spoofing.</p>
<h3 id="The-theory-behind-ARP-Spoofing"><a href="#The-theory-behind-ARP-Spoofing" class="headerlink" title="The theory behind ARP Spoofing"></a>The theory behind ARP Spoofing</h3><p>From the machine in the LAN, the attacker associate his MAC address and IP address of the target host (usually the Gateway), so that any traffic sent to that target host will come to the attacker. Here the attacker can decide whether to modify the packet, send or not.</p>
<h3 id="There-are-3-types-of-ARP-Spoofing"><a href="#There-are-3-types-of-ARP-Spoofing" class="headerlink" title="There are 3 types of ARP Spoofing"></a>There are 3 types of ARP Spoofing</h3><ol>
<li>Spoof the host computer  </li>
<li>Spoof the Gateway  </li>
<li>Spoof both the host computer and the Gateway</li>
</ol>
<h3 id="To-see-the-ARP-table"><a href="#To-see-the-ARP-table" class="headerlink" title="To see the ARP table"></a>To see the ARP table</h3><p>Open Command line (Windows) or Terminal (Mac OSX), and type</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp -a</span><br></pre></td></tr></table></figure>

<p>This will list the MAC address associated with a specific IP. Note that some mappings maybe wrong due to ARP Spoofing</p>
<h3 id="How-to-prevent-against-this"><a href="#How-to-prevent-against-this" class="headerlink" title="How to prevent against this ?"></a>How to prevent against this ?</h3><p>To prevent spoofing our computer, we can use softwares (search for Anti Netcut, Anti ARP spoofing, ‚Ä¶) or set the static ARP ourselves. In fact, those softwares are based on setting static ARP. This way we set the static mapping IP-MAC for a specific host (computer or Gateway), and the OS definitely ignores all ARP replies for that IP.</p>
<p>Example of static ARP mapping associated with the Gateway, performed on the computer host</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.1 B4-B3-62-7C-CE-55</span><br></pre></td></tr></table></figure>

<p>Here 192.168.1.1 and B4-B3-62-7C-CE-55 are the Gateway‚Äôs IP and MAC address</p>
<p>To prevent spoofing the Gateway, we must set static ARP on that Gateway. Go to the Gateway/Router interface, in its ARP setting, fill in the mapping IP-MAC for a specific host  </p>
<p>Look for that Gateway manual or the related guide on how to perform this. This is devices dependent-method, but the theory remains the same.</p>
<p>Example of static ARP mapping associated with the computer host, performed on the Gateway</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.2 64-70-02-B2-9B-E1</span><br></pre></td></tr></table></figure>

<p>Here 192.168.1.2 and 64-70-02-B2-9B-E1 are the machine host ‚Äòs IP and MAC address. The machine host can be any computer in the LAN</p>
<h3 id="How-to-set-static-ARP"><a href="#How-to-set-static-ARP" class="headerlink" title="How to set static ARP"></a>How to set static ARP</h3><p>Proposed that  </p>
<p>192.168.1.1 The destination host ‚Äòs IP  </p>
<p>B4-B3-62-7C-CE-55 The destination host ‚Äòs MAC  </p>
<p>Local Area Connection Our network interface name</p>
<p>Open Terminal (Mac OSX)</p>
<p>To delete specific mapping</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo arp -d 192.168.1.1</span><br></pre></td></tr></table></figure>

<p>To set specific mapping</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo arp -s 192.168.1.1 B4-B3-62-7C-CE-55</span><br></pre></td></tr></table></figure>

<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ol>
<li><a href="http://en.wikipedia.org/wiki/ARP_spoofing" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/ARP_spoofing</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:08:13.000Z" title="2018-02-27T11:08:13.000Z">2018-02-27</time><span class="level-item">10 minutes read (About 1551 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Make-your-own-sliding-menu-on-Android-tutorial-Part-2/">Make your own sliding menu on Android tutorial ‚Äì Part 2</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/152" target="_blank" rel="noopener">#152</a></strong></p>
<p>This is the part 2 of the tutorial. If you forget, here is the link to <a href="https://github.com/onmyway133/blog/issues/151" target="_blank" rel="noopener">part 1</a>.</p>
<p>Link to <a href="https://github.com/onmyway133/slidingmenu" target="_blank" rel="noopener">Github</a></p>
<p>In the first part, we learn about the idea, the structure of the project and how MainActivity uses the MainLayout. Now we learn how to actually implement the MainLayout</p>
<h2 id="DISPLAY-MENU-AND-CONTENT-VIEW"><a href="#DISPLAY-MENU-AND-CONTENT-VIEW" class="headerlink" title="DISPLAY MENU AND CONTENT VIEW"></a>DISPLAY MENU AND CONTENT VIEW</h2><p>First we have MainLayout as a subclass of LinearLayout</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainLayout</span> <span class="keyword">extends</span> <span class="title">LinearLayout</span></span></span><br></pre></td></tr></table></figure>

<p>We then need declare the constructors</p></div><a class="article-more button is-small size-small" href="/blog/Make-your-own-sliding-menu-on-Android-tutorial-Part-2/#more">Read More</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-27T11:07:48.000Z" title="2018-02-27T11:07:48.000Z">2018-02-27</time><span class="level-item">8 minutes read (About 1155 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Make-your-own-sliding-menu-on-Android-tutorial-Part-1/">Make your own sliding menu on Android tutorial - Part 1</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/151" target="_blank" rel="noopener">#151</a></strong></p>
<p>This post was from long time ago when I did Android</p>
<hr>
<p>I can‚Äôt deny that Facebook is so amazing, they made trends and people want to follow. That is the case of the sliding menu.</p>
<p>Searching many threads on SO, like these <a href="http://stackoverflow.com/questions/16735398/create-android-sliding-menu-like-facebook-gmail" target="_blank" rel="noopener">create android Sliding Menu like Facebook,gmail</a>, <a href="http://stackoverflow.com/questions/16983794/android-sliding-menu-similar-to-the-one-on-facebook" target="_blank" rel="noopener">Android sliding menu similar to the one on facebook</a>, <a href="http://stackoverflow.com/questions/15264567/android-sliding-menu-with-sub-menu" target="_blank" rel="noopener">Android - Sliding menu with sub menu</a> ‚Ä¶ they will mostly introduce you to some good sliding menu libraries, like this <a href="https://github.com/jfeinstein10/SlidingMenu" target="_blank" rel="noopener">SlidingMenu</a> and some <a href="http://www.michenux.net/android-sliding-menu-part-1-657.html" target="_blank" rel="noopener">tutorials</a> on how to use it. And of course, not forget to mention the <a href="http://developer.android.com/design/patterns/navigation-drawer.html" target="_blank" rel="noopener">Navigation Drawer</a> that shipped with the Android SDK</p>
<p>If you are a do-it-yourself guy like me, then here is the tutorial for you. It is mostly based on the following Youtube videos and guides</p></div><a class="article-more button is-small size-small" href="/blog/Make-your-own-sliding-menu-on-Android-tutorial-Part-1/#more">Read More</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-15T12:48:02.000Z" title="2018-02-15T12:48:02.000Z">2018-02-15</time><span class="level-item">a few seconds read (About 30 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Some-interesting-repositories/">Some interesting repositories</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/150" target="_blank" rel="noopener">#150</a></strong></p>
<h3 id="Cool"><a href="#Cool" class="headerlink" title="Cool"></a>Cool</h3><ul>
<li><a href="https://github.com/GoogleChrome/puppeteer" target="_blank" rel="noopener">https://github.com/GoogleChrome/puppeteer</a></li>
</ul>
<h3 id="üôÑ"><a href="#üôÑ" class="headerlink" title="üôÑ"></a>üôÑ</h3><ul>
<li><a href="https://github.com/kelseyhightower/nocode" target="_blank" rel="noopener">https://github.com/kelseyhightower/nocode</a></li>
<li><a href="https://github.com/jackdclark/five" target="_blank" rel="noopener">https://github.com/jackdclark/five</a></li>
<li><a href="https://github.com/auchenberg/volkswagen" target="_blank" rel="noopener">https://github.com/auchenberg/volkswagen</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-02-01T11:37:57.000Z" title="2018-02-01T11:37:57.000Z">2018-02-01</time><span class="level-item">3 minutes read (About 481 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Dealing-with-updated-pod-in-BuddyBuild/">Dealing with updated pod in BuddyBuild</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/149" target="_blank" rel="noopener">#149</a></strong></p>
<p>We‚Äôre using BuddyBuild as our CI. Today one of our dependencies gets a sweat update <a href="https://github.com/hyperoslo/BarcodeScanner/releases/tag/4.1.1" target="_blank" rel="noopener">https://github.com/hyperoslo/BarcodeScanner/releases/tag/4.1.1</a>. So we <code>pod update BarcodeScanner</code> in one of our projects that depends on it. All is fine when running locally. So I make a Pull Request and wait for the build to kick off in BuddyBuild.</p>
<p>For some reason, BuddyBuild can‚Äôt pick up the right version of Cocoapods, hence can‚Äôt update the new pods.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[!] The version of CocoaPods used to generate the lockfile (1.3.1) is higher than the version of the current executable (1.1.1). Incompatibility issues may arise.</span><br><span class="line"></span><br><span class="line">=== CocoaPods ===</span><br><span class="line">104</span><br><span class="line">    Switching CocoaPods version to 1.1.1</span><br><span class="line">105</span><br><span class="line">    Using Command Line: gem cleanup &quot;cocoapods&quot;</span><br><span class="line">106</span><br><span class="line">    Using Command Line: gem uninstall &quot;cocoapods&quot; --all --executables --force</span><br><span class="line">107</span><br><span class="line">    Using Command Line: gem install &quot;cocoapods&quot; --no-rdoc --no-ri --version &quot;1.1.1&quot;</span><br><span class="line">108</span><br><span class="line">    Unpacking caches - cocoapods pod specs</span><br><span class="line">109</span><br><span class="line">    Using Command Line: pod install --no-repo-update</span><br><span class="line">110</span><br><span class="line">    Analyzing dependencies</span><br><span class="line">111</span><br><span class="line">    Pre-downloading: `Tailor` from `https://github.com/zenangst/Tailor`, tag `3.0.0`</span><br><span class="line">112</span><br><span class="line">    [!] Unable to satisfy the following requirements:</span><br><span class="line">113</span><br><span class="line">    - `BarcodeScanner (~&gt; 4.0)` required by `Podfile`</span><br><span class="line">114</span><br><span class="line">    - `BarcodeScanner (~&gt; 4.0)` required by `Podfile`</span><br><span class="line">115</span><br><span class="line">    - `BarcodeScanner (~&gt; 4.0)` required by `Podfile`</span><br><span class="line">116</span><br><span class="line">    - `BarcodeScanner (~&gt; 4.0)` required by `Podfile`</span><br><span class="line">117</span><br><span class="line">    - `BarcodeScanner (~&gt; 4.0)` required by `Podfile`</span><br><span class="line">118</span><br><span class="line">    - `BarcodeScanner (~&gt; 4.0)` required by `Podfile`</span><br><span class="line">119</span><br><span class="line">    - `BarcodeScanner (= 4.1.1)` required by `Podfile.lock`</span><br><span class="line">120</span><br><span class="line">    None of your spec sources contain a spec satisfying the dependencies: `BarcodeScanner (~&gt; 4.0), BarcodeScanner (= 4.1.1)`.</span><br><span class="line">121</span><br><span class="line">    You have either:</span><br><span class="line">122</span><br><span class="line">     * out-of-date source repos which you can update with `pod repo update`.</span><br><span class="line">123</span><br><span class="line">     * mistyped the name or version.</span><br><span class="line">124</span><br><span class="line">     * not added the source repo that hosts the Podspec to your Podfile.</span><br><span class="line">125</span><br><span class="line">    Note: as of CocoaPods 1.0, `pod repo update` does not happen on `pod install` by default.</span><br></pre></td></tr></table></figure>

<h3 id="Trying-script"><a href="#Trying-script" class="headerlink" title="Trying script"></a>Trying script</h3><p>So I thought I could run some custom script to force BuddyBuild to update the pods. Start with <a href="https://docs.buddybuild.com/builds/custom_build_steps.html" target="_blank" rel="noopener">https://docs.buddybuild.com/builds/custom_build_steps.html</a></p>
<p>I commit the file <code>buddybuild_postclone.sh</code> with</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line"> </span><br><span class="line">pod repo update</span><br><span class="line">pod update BarcodeScanner</span><br></pre></td></tr></table></figure>

<p>Didn‚Äôt work. I then update the script with </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line"> </span><br><span class="line">pod repo remove master</span><br><span class="line">pod setup</span><br><span class="line">pod install</span><br></pre></td></tr></table></figure>

<p>Didn‚Äôt work. Taking a closer look at the log. I see</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Switching CocoaPods version to 1.1.1</span><br></pre></td></tr></table></figure>

<p>It seems BuddyBuild is using cocoapods 1.1.1. Mine is 1.4.0.</p>
<h3 id="Specifying-cocoapods-version"><a href="#Specifying-cocoapods-version" class="headerlink" title="Specifying cocoapods version"></a>Specifying cocoapods version</h3><p>So I need to specify the correct cocoapods version to make sure I and BuddyBuild are on the same page</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gem install bundler</span><br><span class="line">bundler init</span><br></pre></td></tr></table></figure>

<p>And in my <code>Gemfile</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># frozen_string_literal: true</span><br><span class="line"></span><br><span class="line">source &quot;https://rubygems.org&quot;</span><br><span class="line"></span><br><span class="line">git_source(:github) &#123;|repo_name| &quot;https://github.com/#&#123;repo_name&#125;&quot; &#125;</span><br><span class="line"></span><br><span class="line">gem &quot;cocoapods&quot;, &apos;~&gt; 1.0&apos;</span><br></pre></td></tr></table></figure>

<p>Then run</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bundler install</span><br></pre></td></tr></table></figure>

<p>And check <code>Gemfile.lock</code> to make sure everything is OK</p>
<h3 id="Finally"><a href="#Finally" class="headerlink" title="Finally"></a>Finally</h3><p>Commit the changes, and now BuddyBuild is picking up the right cocoapods version, hence using the new pods</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">=== CocoaPods ===</span><br><span class="line">45</span><br><span class="line">    Switching CocoaPods version to 1.4.0</span><br><span class="line">46</span><br><span class="line">    Using Command Line: gem cleanup &quot;cocoapods&quot;</span><br><span class="line">47</span><br><span class="line">    Using Command Line: gem uninstall &quot;cocoapods&quot; --all --executables --force</span><br><span class="line">48</span><br><span class="line">    Using Command Line: gem install &quot;cocoapods&quot; --no-rdoc --no-ri --version &quot;1.4.0&quot;</span><br><span class="line">49</span><br><span class="line">    Unpacking caches - cocoapods pod specs</span><br><span class="line">50</span><br><span class="line">    Using Command Line: pod install --no-repo-update</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-26T12:40:28.000Z" title="2018-01-26T12:40:28.000Z">2018-01-26</time><span class="level-item">a minute read (About 189 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-from-Open-Source-Generic-Factory/">Learning from Open Source  Generic Factory</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/148" target="_blank" rel="noopener">#148</a></strong></p>
<p>From <a href="https://github.com/devxoul/Pure/blob/master/Sources/Pure/FactoryModule.swift" target="_blank" rel="noopener">https://github.com/devxoul/Pure/blob/master/Sources/Pure/FactoryModule.swift</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">FactoryModule</span>: <span class="title">Module</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// A factory for `Self`.</span></span><br><span class="line">  <span class="keyword">associatedtype</span> <span class="type">Factory</span> = <span class="type">Pure</span>.<span class="type">Factory</span>&lt;<span class="type">Self</span>&gt;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Creates an instance of a module with a dependency and a payload.</span></span><br><span class="line">  <span class="keyword">init</span>(dependency: <span class="type">Dependency</span>, payload: <span class="type">Payload</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>From <a href="https://github.com/devxoul/Pure/blob/master/Sources/Pure/Factory.swift" target="_blank" rel="noopener">https://github.com/devxoul/Pure/blob/master/Sources/Pure/Factory.swift</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span>&lt;<span class="title">Module</span>: <span class="title">FactoryModule</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">let</span> dependencyClosure: () -&gt; <span class="type">Module</span>.<span class="type">Dependency</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/// A static dependency of a module.</span></span><br><span class="line">  <span class="keyword">open</span> <span class="keyword">var</span> dependency: <span class="type">Module</span>.<span class="type">Dependency</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.dependencyClosure()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Creates an instance of `Factory`.</span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// - parameter dependency: A static dependency which should be resolved in a composition root.</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">init</span>(dependency: <span class="meta">@autoclosure</span> @escaping () -&gt; <span class="type">Module</span>.<span class="type">Dependency</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.dependencyClosure = dependency</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Creates an instance of a module with a runtime parameter.</span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// - parameter payload: A runtime parameter which is required to construct a module.</span></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">create</span><span class="params">(payload: Module.Payload)</span></span> -&gt; <span class="type">Module</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Module</span>.<span class="keyword">init</span>(dependency: <span class="keyword">self</span>.dependency, payload: payload)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>From <a href="https://github.com/devxoul/Pure/blob/master/Tests/PureTests/PureSpec.swift#L72" target="_blank" rel="noopener">https://github.com/devxoul/Pure/blob/master/Tests/PureTests/PureSpec.swift#L72</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> factory = <span class="type">FactoryFixture</span>&lt;<span class="type">Dependency</span>, <span class="type">Payload</span>&gt;.<span class="type">Factory</span>(dependency: .<span class="keyword">init</span>(</span><br><span class="line">  networking: <span class="string">"Networking A"</span></span><br><span class="line">))</span><br><span class="line"><span class="keyword">let</span> instance = factory.create(payload: .<span class="keyword">init</span>(id: <span class="number">100</span>))</span><br><span class="line">expect(instance.dependency.networking) == <span class="string">"Networking A"</span></span><br><span class="line">expect(instance.payload.id) == <span class="number">100</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-26T12:02:44.000Z" title="2018-01-26T12:02:44.000Z">2018-01-26</time><span class="level-item">3 minutes read (About 400 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Using-camelCase-for-abbreviations/">Using camelCase for abbreviations</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/147" target="_blank" rel="noopener">#147</a></strong></p>
<p>Each language and platform has its own coding style guide. This goes true when it comes to abbreviations. I‚Äôve had some debates about whether to use <code>JSON</code>  or <code>Json</code>, <code>URL</code> or <code>Url</code>, <code>HTTP</code> or <code>Http</code>. </p>
<p>I personally prefer camelCase, so I‚Äôm very happy to see that Kotlin is on my side. See <a href="https://android.github.io/kotlin-guides/style.html#camel-case" target="_blank" rel="noopener">Kotlin Style guide</a>, I think this guide should be applied in other languages, such as Swift üòõ </p>
<blockquote>
<p>Sometimes there is more than one reasonable way to convert an English phrase into camel case, such as when acronyms or unusual constructs like ‚ÄúIPv6‚Äù or ‚ÄúiOS‚Äù are present. To improve predictability, use the following scheme.</p>
</blockquote>
<blockquote>
<p>Beginning with the prose form of the name:</p>
</blockquote>
<blockquote>
<ol>
<li>Convert the phrase to plain ASCII and remove any apostrophes. For example, ‚ÄúM√ºller‚Äôs algorithm‚Äù might become ‚ÄúMuellers algorithm‚Äù.</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>Divide this result into words, splitting on spaces and any remaining punctuation (typically hyphens).</li>
</ol>
</blockquote>
<blockquote>
<p>Recommended: if any word already has a conventional camel-case appearance in common usage, split this into its constituent parts (e.g., ‚ÄúAdWords‚Äù becomes ‚Äúad words‚Äù). Note that a word such as ‚ÄúiOS‚Äù is not really in camel case per se; it defies any convention, so this recommendation does not apply.</p>
</blockquote>
<blockquote>
<ol start="3">
<li>Now lowercase everything (including acronyms), then uppercase only the first character of:</li>
</ol>
</blockquote>
<blockquote>
<p>‚Ä¶each word, to yield pascal case, or</p>
</blockquote>
<blockquote>
<p>‚Ä¶each word except the first, to yield camel case</p>
</blockquote>
<blockquote>
<ol start="4">
<li>Finally, join all the words into a single identifier.</li>
</ol>
</blockquote>
<blockquote>
<p>Note that the casing of the original words is almost entirely disregarded.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Prose form</th>
<th>Correct</th>
<th>Incorrect</th>
</tr>
</thead>
<tbody><tr>
<td>‚ÄúXML Http Request‚Äù</td>
<td>XmlHttpRequest</td>
<td>XMLHTTPRequest</td>
</tr>
<tr>
<td>‚Äúnew customer ID‚Äù</td>
<td>newCustomerId</td>
<td>newCustomerID</td>
</tr>
<tr>
<td>‚Äúinner stopwatch‚Äù</td>
<td>innerStopwatch</td>
<td>innerStopWatch</td>
</tr>
<tr>
<td>‚Äúsupports IPv6 on iOS‚Äù</td>
<td>supportsIpv6OnIos</td>
<td>supportsIPv6OnIOS</td>
</tr>
<tr>
<td>‚ÄúYouTube importer‚Äù</td>
<td>YouTubeImporterYoutubeImporter*</td>
<td></td>
</tr>
</tbody></table>
<p>About <code>iOS</code> or <code>IOS</code>, I think I would go with <code>IOS</code>. I think <a href="https://facebook.github.io/react-native/docs/navigation.html#navigatorios" target="_blank" rel="noopener">React Native</a> thinks so too</p>
<blockquote>
<p>NavigatorIOS looks and feels just like UINavigationController, because it is actually built on top of it.</p>
</blockquote>
<h3 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h3><ul>
<li><a href="https://softwareengineering.stackexchange.com/questions/186277/should-the-variable-be-named-id-or-id" target="_blank" rel="noopener">https://softwareengineering.stackexchange.com/questions/186277/should-the-variable-be-named-id-or-id</a></li>
<li><a href="https://swift.org/documentation/api-design-guidelines/#promote-clear-usage" target="_blank" rel="noopener">https://swift.org/documentation/api-design-guidelines/#promote-clear-usage</a></li>
<li><a href="https://github.com/raywenderlich/swift-style-guide#naming" target="_blank" rel="noopener">https://github.com/raywenderlich/swift-style-guide#naming</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-26T11:53:54.000Z" title="2018-01-26T11:53:54.000Z">2018-01-26</time><span class="level-item">a few seconds read (About 41 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-sine/">Learning sine</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/146" target="_blank" rel="noopener">#146</a></strong></p>
<p>To be written ‚Ä¶</p>
<p>Old math equations become useful today üòç </p>
<ul>
<li><code>v = 1 - x</code></li>
<li>From <a href="https://www.desmos.com/calculator" target="_blank" rel="noopener">https://www.desmos.com/calculator</a></li>
</ul>
<p><img src="https://user-images.githubusercontent.com/2284279/35440591-576ec272-02a0-11e8-9e2a-b9749ad0db88.png" alt="sine"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-17T14:24:55.000Z" title="2018-01-17T14:24:55.000Z">2018-01-17</time><span class="level-item">2 minutes read (About 368 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-fix-Uncaught-Error-Cannot-find-module-react/">How to fix Uncaught Error Cannot find module react</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/145" target="_blank" rel="noopener">#145</a></strong></p>
<p>This is my story through dealing with many dependencies when trying to package an electron app. Thanks to my friend <a href="https://github.com/timkurvers" target="_blank" rel="noopener">https://github.com/timkurvers</a> for helping me out ‚ù§Ô∏è  This is like a note for my future self</p>
<h3 id="Fixing-event"><a href="#Fixing-event" class="headerlink" title="Fixing event"></a>Fixing event</h3><p>The other I got an issue <a href="https://github.com/onmyway133/PushNotifications/issues/3" target="_blank" rel="noopener">https://github.com/onmyway133/PushNotifications/issues/3</a> that reports there‚Äôs something wrong with production environment. The problem is that I used <a href="http://www.material-ui.com/#/components/radio-button" target="_blank" rel="noopener">RadioButton</a> and its <code>onChange</code> callback takes 2 parameters instead of 1.</p>
<h3 id="Trying-packaging"><a href="#Trying-packaging" class="headerlink" title="Trying packaging"></a>Trying packaging</h3><p>After the fix, I bump version in <code>package.json</code> and run <code>yarn release</code>. To my surprise, the built app was just blank. I tried <code>win.toggleDevTools()</code> to see what‚Äôs going on. I can‚Äôt use shortcut to open the dev tool any more in production, but there are tools <a href="https://github.com/sindresorhus/electron-debug" target="_blank" rel="noopener">https://github.com/sindresorhus/electron-debug</a>. </p>
<p>The console says that it can‚Äôt find the module ‚Äòreact‚Äô. I then submitted an issue <a href="https://github.com/electron-userland/electron-packager/issues/787" target="_blank" rel="noopener">https://github.com/electron-userland/electron-packager/issues/787</a></p>
<blockquote>
<p>Uncaught Error: Cannot find module ‚Äòreact‚Äô</p>
</blockquote>
<p>My environment</p>
<ul>
<li>Node v8.4.0</li>
<li>npm 5.3.0</li>
<li>yarn 1.3.2</li>
<li>macOS 10.13.2</li>
</ul>
<h3 id="Inspecting-with-debug-mode"><a href="#Inspecting-with-debug-mode" class="headerlink" title="Inspecting with debug mode"></a>Inspecting with debug mode</h3><p>I then need to run in debug mode to see what‚Äôs really happening</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEBUG=electron-packager npm run release</span><br></pre></td></tr></table></figure>

<p>The log says something about <code>npm</code></p>
<blockquote>
<p>Command failed: npm prune ‚Äìproduction</p>
</blockquote>
<p>Digging a little, I found that this is quite a common issue</p>
<ul>
<li><a href="https://github.com/electron-userland/electron-packager/issues/686" target="_blank" rel="noopener">https://github.com/electron-userland/electron-packager/issues/686</a></li>
<li><a href="https://github.com/npm/npm/issues/17781" target="_blank" rel="noopener">https://github.com/npm/npm/issues/17781</a></li>
</ul>
<p>I think the issue may be because of I changed from <a href="https://github.com/creationix/nvm" target="_blank" rel="noopener">https://github.com/creationix/nvm</a> to <a href="https://github.com/nodenv/nodenv" target="_blank" rel="noopener">https://github.com/nodenv/nodenv</a></p>
<h3 id="Updating-nodenv"><a href="#Updating-nodenv" class="headerlink" title="Updating nodenv"></a>Updating nodenv</h3><p>The latest stable version of <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a> is 8.9.4. To enable <code>nodenv</code> to see it, we need</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew upgrade node-build</span><br></pre></td></tr></table></figure>

<p>Run the following so that you actually see the 8.9.4</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodenv install --list</span><br></pre></td></tr></table></figure>

<h3 id="Updating-node-js"><a href="#Updating-node-js" class="headerlink" title="Updating node.js"></a>Updating node.js</h3><p>Install version 8.9.4</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nodenv install 8.9.4</span><br><span class="line">nodenv global 8.9.4</span><br><span class="line">nodenv rehash</span><br></pre></td></tr></table></figure>

<h3 id="Updating-npm"><a href="#Updating-npm" class="headerlink" title="Updating npm"></a>Updating npm</h3><p>Run the following to update <code>npm</code> to 5.6.0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update -g np</span><br></pre></td></tr></table></figure>

<h3 id="Installing-dependencies-from-scratch"><a href="#Installing-dependencies-from-scratch" class="headerlink" title="Installing dependencies from scratch"></a>Installing dependencies from scratch</h3><p>Clear old <code>node_modules</code> and <code>package-lock.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf node_modules</span><br><span class="line">rm -rf package-lock.json</span><br></pre></td></tr></table></figure>

<p>Then install again</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h3 id="Packaging"><a href="#Packaging" class="headerlink" title="Packaging"></a>Packaging</h3><p>The final step is to package the app again</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn release</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-10T12:40:08.000Z" title="2018-01-10T12:40:08.000Z">2018-01-10</time><span class="level-item">3 minutes read (About 474 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-standalone-UINavigationBar-in-iOS/">How to use standalone UINavigationBar in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/144" target="_blank" rel="noopener">#144</a></strong></p>
<p>There are times we want the same <code>UIViewController</code> to look good when it‚Äôs presented modally or pushed from <code>UINavigationController</code> stack. Take a look at BarcodeScanner and the PR <a href="https://github.com/hyperoslo/BarcodeScanner/pull/82" target="_blank" rel="noopener">https://github.com/hyperoslo/BarcodeScanner/pull/82</a></p>
<p>When it is presented, we need a header view so that we can show a title and a close button. We can create a custom <code>HeaderView</code> that inherits from <code>UIView</code> or either embed it in a <code>UINavigationController</code> before presenting.</p>
<p>If we go with the controller being embedded in <code>UINavigationController</code> approach, it will collide with the other <code>UINavigationController</code> when it is pushed.</p>
<p>If we go with custom <code>HeaderView</code>, then we need to layout the view so that it looks good on both portrait and landscape, and on iPhone X that as <code>safeAreaLayoutGuide</code>.</p>
<h2 id="Using-standalone-UINavigationBar"><a href="#Using-standalone-UINavigationBar" class="headerlink" title="Using standalone UINavigationBar"></a>Using standalone UINavigationBar</h2><p>Since <code>UINavigationController</code> uses <code>UINavigationBar</code> under the hood, which uses <code>UINavigationItem</code> info to present the content. We can imitate this behavior by using a standalone <code>UINavigationBar</code>. See <a href="https://developer.apple.com/documentation/uikit/uinavigationbar" target="_blank" rel="noopener">Adding Content to a Standalone Navigation Bar</a></p>
<blockquote>
<p>In the vast majority of scenarios you will use a navigation bar as part of a navigation controller. However, there are situations for which you might want to use the navigation bar UI and implement your own approach to content navigation. In these situations, you can use a standalone navigation bar.</p>
</blockquote>
<blockquote>
<p>A navigation bar manages a stack of UINavigationItem objects</p>
</blockquote>
<p>The beauty is that our standalone <code>UINavigationBar</code> and that of <code>UINavigationController</code> are the same, use the same <code>UINavigationItem</code> and no manual layout are needed</p>
<h3 id="Declare-UINavigationItem"><a href="#Declare-UINavigationItem" class="headerlink" title="Declare UINavigationItem"></a>Declare <code>UINavigationItem</code></h3><p>We can just set properties like we did with a normal <code>navigationItem</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> standaloneItem = <span class="type">UINavigationItem</span>()</span><br><span class="line">standaloneItem.leftBarButtonItem = <span class="type">UIBarButtonItem</span>(customView: closeButton)</span><br><span class="line">standaloneItem.titleView = <span class="type">UILabel</span>()</span><br></pre></td></tr></table></figure>

<h3 id="Adding-UINavigationBar"><a href="#Adding-UINavigationBar" class="headerlink" title="Adding UINavigationBar"></a>Adding <code>UINavigationBar</code></h3><p>Customise your bar, then declare layout constraints. You only need to pin left, right, and top. Note that you need to implement <code>UINavigationBarDelegate</code> to attach bar to status bar, so that it appears good on iPhone X too</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> navigationBar = <span class="type">UINavigationBar</span>()</span><br><span class="line">navigationBar.isTranslucent = <span class="literal">false</span></span><br><span class="line">navigationBar.delegate = <span class="keyword">self</span></span><br><span class="line">navigationBar.backgroundColor = .white</span><br><span class="line">navigationBar.items = [standaloneItem]</span><br><span class="line"> </span><br><span class="line">navigationBar.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line">navigationBar.leftAnchor.constraint(equalTo: view.leftAnchor).isActive = <span class="literal">true</span></span><br><span class="line">navigationBar.rightAnchor.constraint(equalTo: view.rightAnchor).isActive = <span class="literal">true</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> #available(iOS <span class="number">11</span>, *) &#123;</span><br><span class="line">  navigationBar.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor).isActive = <span class="literal">true</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  navigationBar.topAnchor.constraint(equalTo: view.topAnchor).isActive = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">BarcodeScannerController</span>: <span class="title">UINavigationBarDelegate</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">position</span><span class="params">(<span class="keyword">for</span> bar: UIBarPositioning)</span></span> -&gt; <span class="type">UIBarPosition</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> .topAttached</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Inside-UINavigationController"><a href="#Inside-UINavigationController" class="headerlink" title="Inside UINavigationController"></a>Inside <code>UINavigationController</code></h3><p>When this <code>UIViewController</code> is pushed from a <code>UINavigationController</code> stack, we just need to hide our standalone <code>navigationBar</code>. If we prefer the default back button, we don‚Äôt need to set <code>leftBarButtonItem</code></p>
<p>On iOS 10, you need to call <code>sizeToFit</code> for any items in <code>UINavigationItem</code> for it to get actual size</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewWillAppear(animated)</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">if</span> navigationController != <span class="literal">nil</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> label = <span class="type">HeaderElement</span>.makeLabel()</span><br><span class="line">      label.sizeToFit()</span><br><span class="line">      navigationItem.titleView = label</span><br><span class="line">    navigationBar.isHidden = <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    navigationBar.isHidden = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-08T14:12:54.000Z" title="2018-01-08T14:12:54.000Z">2018-01-08</time><span class="level-item">a minute read (About 168 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-deal-with-animation-in-UITests-in-iOS/">How to deal with animation in UITests in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/143" target="_blank" rel="noopener">#143</a></strong></p>
<p>Today I was writing tests and get this error related to <code>app idle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t =    23.06s         Assertion Failure: &lt;unknown&gt;:0: Failed to scroll to visible (by AX action) Button, 0x6000003827d0, traits: 8858370049, label: &apos;cart&apos;, error: Error -25204 performing AXAction 2003 on element &lt;XCAccessibilityElement: 0x7fc391a2bd60&gt; pid: 91461, elementOrHash.elementID: 140658975676048.128</span><br></pre></td></tr></table></figure>

<p>It turns out that the project uses a HUD that is performing some progress animation. Even it was being called <code>HUD.hide()</code>, the problem still exists. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t =    31.55s     Wait for no.example.MyApp to idle</span><br><span class="line"> t =    91.69s         App animations complete notification not received, will attempt to continue.</span><br><span class="line"> t =    91.70s Tap Target Application 0x6040002a1260</span><br><span class="line"> t =    91.70s     Wait for no.example.MyApp to id</span><br></pre></td></tr></table></figure>

<p>No matter how I call <code>sleep,</code>wait`, still the problem</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sleep(<span class="number">10</span>)</span><br><span class="line">app.tap()</span><br><span class="line"><span class="number">_</span> = checkoutButton.waitForExistence(timeout: <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>The fix is to disable animation. Start with setting argument when running tests</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.launchArguments.append(<span class="string">"--UITests"</span>)</span><br><span class="line">app.launch</span><br></pre></td></tr></table></figure>

<p>Then in <code>AppDelegate</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: <span class="keyword">Any</span>]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> <span class="type">CommandLine</span>.arguments.<span class="built_in">contains</span>(<span class="string">"--UITests"</span>) &#123;</span><br><span class="line">    <span class="type">UIView</span>.setAnimationsEnabled(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-06T17:41:50.000Z" title="2018-01-06T17:41:50.000Z">2018-01-06</time><span class="level-item">a minute read (About 122 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-generate-QR-code-in-AppKit/">How to generate QR code in AppKit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/140" target="_blank" rel="noopener">#140</a></strong></p>
<p>I need to generate QR code in <a href="https://github.com/onmyway133/AddressGenerator" target="_blank" rel="noopener">https://github.com/onmyway133/AddressGenerator</a>. Fortunately with <code>CoreImage</code> filter, it is very easy. Code is in Swift 4</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">QRCodeGenerator</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(string: String, size: CGSize)</span></span> -&gt; <span class="type">NSImage?</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> data = string.data(using: .utf8) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Filter</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> <span class="built_in">filter</span> = <span class="type">CIFilter</span>(name: <span class="string">"CIQRCodeGenerator"</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">filter</span>.setValue(data, forKey: <span class="string">"inputMessage"</span>)</span><br><span class="line">    <span class="built_in">filter</span>.setValue(<span class="string">"Q"</span>, forKey: <span class="string">"inputCorrectionLevel"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// CIImage</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> ciImage = <span class="built_in">filter</span>.outputImage <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// NSImage</span></span><br><span class="line">    <span class="keyword">let</span> rep = <span class="type">NSCIImageRep</span>(ciImage: ciImage)</span><br><span class="line">    <span class="keyword">let</span> image = <span class="type">NSImage</span>(size: rep.size)</span><br><span class="line">    image.addRepresentation(rep)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Scale</span></span><br><span class="line">    <span class="keyword">let</span> finalImage = <span class="type">NSImage</span>(size: size)</span><br><span class="line">    finalImage.lockFocus()</span><br><span class="line">    <span class="type">NSGraphicsContext</span>.current?.imageInterpolation = .<span class="keyword">none</span></span><br><span class="line">    image.draw(<span class="keyword">in</span>: <span class="type">NSRect</span>(origin: .zero, size: size))</span><br><span class="line">    finalImage.unlockFocus()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> finalImage</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-05T12:54:26.000Z" title="2018-01-05T12:54:26.000Z">2018-01-05</time><span class="level-item">a minute read (About 155 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Function-Literals-with-Receiver-in-Kotlin/">How to use Function Literals with Receiver in Kotlin</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/139" target="_blank" rel="noopener">#139</a></strong></p>
<p>From <a href="https://kotlinlang.org/docs/reference/lambdas.html" target="_blank" rel="noopener">https://kotlinlang.org/docs/reference/lambdas.html</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTML</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">body</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">html</span><span class="params">(<span class="keyword">init</span>: <span class="type">HTML</span>.() -&gt; <span class="type">Unit</span>)</span></span>: HTML &#123;</span><br><span class="line">    <span class="keyword">val</span> html = HTML()  <span class="comment">// create the receiver object</span></span><br><span class="line">    html.<span class="keyword">init</span>()        <span class="comment">// pass the receiver object to the lambda</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">html &#123;       <span class="comment">// lambda with receiver begins here</span></span><br><span class="line">    body()   <span class="comment">// calling a method on the receiver object</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>From <a href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/util/Standard.kt" target="_blank" rel="noopener">https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/util/Standard.kt</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@kotlin</span>.<span class="keyword">internal</span>.InlineOnly</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> T.<span class="title">apply</span><span class="params">(block: <span class="type">T</span>.() -&gt; <span class="type">Unit</span>)</span></span>: T &#123;</span><br><span class="line">    contract &#123;</span><br><span class="line">        callsInPlace(block, InvocationKind.EXACTLY_ONCE)</span><br><span class="line">    &#125;</span><br><span class="line">    block()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> person = Person().apply &#123;</span><br><span class="line">  name = <span class="string">"Superman"</span></span><br><span class="line">  age = <span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>From <a href="https://academy.realm.io/posts/kau-jake-wharton-testing-robots/" target="_blank" rel="noopener">https://academy.realm.io/posts/kau-jake-wharton-testing-robots/</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">payment</span><span class="params">(func: <span class="type">PaymentRobot</span>.() -&gt; <span class="type">Unit</span>)</span></span> = PaymentRobot().apply &#123; func() &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaymentRobot</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">fun</span> <span class="title">amount</span><span class="params">(amount: <span class="type">Long</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">fun</span> <span class="title">recipient</span><span class="params">(recipient: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">infix</span> <span class="function"><span class="keyword">fun</span> <span class="title">send</span><span class="params">(func: <span class="type">ResultRobot</span>.() -&gt; <span class="type">Unit</span>)</span></span>: ResultRobot &#123;</span><br><span class="line">	  <span class="comment">// ...</span></span><br><span class="line">	  <span class="keyword">return</span> ResultRobot().apply &#123; func() &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResultRobot</span> </span>&#123;</span><br><span class="line">	func isSuccess() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">payment &#123;</span><br><span class="line">	amount(<span class="number">4200</span>)</span><br><span class="line">	recipient(<span class="symbol">superman@</span>google.com)</span><br><span class="line">&#125; send &#123;</span><br><span class="line">	isSuccess()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-05T10:22:38.000Z" title="2018-01-05T10:22:38.000Z">2018-01-05</time><span class="level-item">a few seconds read (About 59 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-R.swift-in-UITest-in-iOS/">How to use R.swift in UITest in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/138" target="_blank" rel="noopener">#138</a></strong></p>
<p>Here is how to use <a href="https://github.com/mac-cain13/R.swift" target="_blank" rel="noopener">R.swift</a> in UITest target</p>
<ul>
<li>Add <code>Localizable.strings</code> to UITest target</li>
<li>Declare pod</li>
</ul>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">target <span class="string">'MyAppUITests'</span> <span class="keyword">do</span></span><br><span class="line">  pod <span class="string">'R.swift'</span>, <span class="string">'~&gt; 4.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<ul>
<li>In UITest target settings, add <code>$(FRAMEWORK_SEARCH_PATHS)</code> to Runpath Search Path</li>
<li>Add <code>R.generated.swift</code> to UITest target</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-04T08:25:12.000Z" title="2018-01-04T08:25:12.000Z">2018-01-04</time><span class="level-item">a few seconds read (About 54 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Hiding-back-button-in-navigation-bar-in-iOS/">Hiding back button in navigation bar in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/137" target="_blank" rel="noopener">#137</a></strong></p>
<p>Use a custom <code>NavigationController</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NavigationController</span>: <span class="title">UINavigationController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    navigationBar.tintColor = .white</span><br><span class="line">    navigationBar.barStyle = .black</span><br><span class="line">    navigationBar.isTranslucent = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">pushViewController</span><span class="params">(<span class="number">_</span> viewController: UIViewController, animated: Bool)</span></span> &#123;</span><br><span class="line">    viewController.navigationItem.backBarButtonItem =</span><br><span class="line">      <span class="type">UIBarButtonItem</span>(title: <span class="string">""</span>, style: .plain, target: <span class="literal">nil</span>, action: <span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">super</span>.pushViewController(viewController, animated: animated)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-03T14:09:55.000Z" title="2018-01-03T14:09:55.000Z">2018-01-03</time><span class="level-item">a few seconds read (About 22 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Some-Swift-tips/">Some Swift tips</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/136" target="_blank" rel="noopener">#136</a></strong></p>
<h3 id="Adding-final"><a href="#Adding-final" class="headerlink" title="Adding final"></a>Adding final</h3><ul>
<li><a href="https://gist.github.com/krzysztofzablocki/8c9a6c428cf5fcf19effca223a5548cd" target="_blank" rel="noopener">https://gist.github.com/krzysztofzablocki/8c9a6c428cf5fcf19effca223a5548cd</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-03T12:52:21.000Z" title="2018-01-03T12:52:21.000Z">2018-01-03</time><span class="level-item">a few seconds read (About 83 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-from-Open-Source-Making-Deferred-in-Kotlin/">Learning from Open Source  Making Deferred in Kotlin</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/135" target="_blank" rel="noopener">#135</a></strong></p>
<p>From <a href="https://github.com/JakeWharton/retrofit2-kotlin-coroutines-adapter/blob/master/src/main/java/com/jakewharton/retrofit2/adapter/kotlin/coroutines/experimental/CoroutineCallAdapterFactory.kt#L86" target="_blank" rel="noopener">https://github.com/JakeWharton/retrofit2-kotlin-coroutines-adapter/blob/master/src/main/java/com/jakewharton/retrofit2/adapter/kotlin/coroutines/experimental/CoroutineCallAdapterFactory.kt#L86</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">adapt</span><span class="params">(call: <span class="type">Call</span>&lt;<span class="type">T</span>&gt;)</span></span>: Deferred&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">val</span> deferred = CompletableDeferred&lt;T&gt;()</span><br><span class="line"></span><br><span class="line">  deferred.invokeOnCompletion &#123;</span><br><span class="line">    <span class="keyword">if</span> (deferred.isCancelled) &#123;</span><br><span class="line">      call.cancel()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  call.enqueue(<span class="keyword">object</span> : Callback&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onFailure</span><span class="params">(call: <span class="type">Call</span>&lt;<span class="type">T</span>&gt;, t: <span class="type">Throwable</span>)</span></span> &#123;</span><br><span class="line">      deferred.completeExceptionally(t)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onResponse</span><span class="params">(call: <span class="type">Call</span>&lt;<span class="type">T</span>&gt;, response: <span class="type">Response</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (response.isSuccessful) &#123;</span><br><span class="line">        deferred.complete(response.body()!!)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        deferred.completeExceptionally(HttpException(response))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> deferred</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-03T11:37:12.000Z" title="2018-01-03T11:37:12.000Z">2018-01-03</time><span class="level-item">a few seconds read (About 18 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-from-Open-Source-Using-dylib-in-macOS-applications/">Learning from Open Source  Using dylib in macOS applications</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/134" target="_blank" rel="noopener">#134</a></strong></p>
<ul>
<li><a href="https://github.com/mortenjust/androidtool-mac" target="_blank" rel="noopener">https://github.com/mortenjust/androidtool-mac</a></li>
<li><a href="https://github.com/mortenjust/droptogif" target="_blank" rel="noopener">https://github.com/mortenjust/droptogif</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-02T07:48:51.000Z" title="2018-01-02T07:48:51.000Z">2018-01-02</time><span class="level-item">a few seconds read (About 59 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Using-dlopen-in-iOS/">Using dlopen in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/133" target="_blank" rel="noopener">#133</a></strong></p>
<p>With <code>dlopen</code> we can make uses of some private frameworks. It will be fun</p>
<p>From <a href="http://blog.zats.io/2017/12/27/iPhone-X-home-button/" target="_blank" rel="noopener">iPhone X home button</a></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;dlfcn.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// somewhere in viewDidLoad</span></span><br><span class="line">dlopen([binaryPath cStringUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>], RTLD_NOW);</span><br><span class="line"><span class="built_in">UIView</span> *<span class="keyword">const</span> view = [[<span class="built_in">NSClassFromString</span>(<span class="string">@"SBHomeGrabberView"</span>) alloc] init];</span><br><span class="line">[view sizeToFit];</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:view];</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-12-22T11:10:43.000Z" title="2017-12-22T11:10:43.000Z">2017-12-22</time><span class="level-item">a minute read (About 186 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-from-Open-Source-Hit-testing-with-UIWindow/">Learning from Open Source  Hit testing with UIWindow</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/132" target="_blank" rel="noopener">#132</a></strong></p>
<p>From <a href="https://github.com/Flipboard/FLEX/blob/master/Classes/ExplorerInterface/FLEXWindow.m" target="_blank" rel="noopener">https://github.com/Flipboard/FLEX/blob/master/Classes/ExplorerInterface/FLEXWindow.m</a></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">id</span>)initWithFrame:(<span class="built_in">CGRect</span>)frame</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        <span class="comment">// Some apps have windows at UIWindowLevelStatusBar + n.</span></span><br><span class="line">        <span class="comment">// If we make the window level too high, we block out UIAlertViews.</span></span><br><span class="line">        <span class="comment">// There's a balance between staying above the app's windows and staying below alerts.</span></span><br><span class="line">        <span class="comment">// UIWindowLevelStatusBar + 100 seems to hit that balance.</span></span><br><span class="line">        <span class="keyword">self</span>.windowLevel = <span class="built_in">UIWindowLevelStatusBar</span> + <span class="number">100.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)pointInside:(<span class="built_in">CGPoint</span>)point withEvent:(<span class="built_in">UIEvent</span> *)event</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">BOOL</span> pointInside = <span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span>.eventDelegate shouldHandleTouchAtPoint:point]) &#123;</span><br><span class="line">        pointInside = [<span class="keyword">super</span> pointInside:point withEvent:event];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pointInside;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>From <a href="https://github.com/Flipboard/FLEX/blob/master/Classes/ExplorerInterface/FLEXExplorerViewController.m" target="_blank" rel="noopener">https://github.com/Flipboard/FLEX/blob/master/Classes/ExplorerInterface/FLEXExplorerViewController.m</a></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)shouldReceiveTouchAtWindowPoint:(<span class="built_in">CGPoint</span>)pointInWindowCoordinates</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">BOOL</span> shouldReceiveTouch = <span class="literal">NO</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CGPoint</span> pointInLocalCoordinates = [<span class="keyword">self</span>.view convertPoint:pointInWindowCoordinates fromView:<span class="literal">nil</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Always if it's on the toolbar</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">CGRectContainsPoint</span>(<span class="keyword">self</span>.explorerToolbar.frame, pointInLocalCoordinates)) &#123;</span><br><span class="line">        shouldReceiveTouch = <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Always if we're in selection mode</span></span><br><span class="line">    <span class="keyword">if</span> (!shouldReceiveTouch &amp;&amp; <span class="keyword">self</span>.currentMode == FLEXExplorerModeSelect) &#123;</span><br><span class="line">        shouldReceiveTouch = <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Always in move mode too</span></span><br><span class="line">    <span class="keyword">if</span> (!shouldReceiveTouch &amp;&amp; <span class="keyword">self</span>.currentMode == FLEXExplorerModeMove) &#123;</span><br><span class="line">        shouldReceiveTouch = <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Always if we have a modal presented</span></span><br><span class="line">    <span class="keyword">if</span> (!shouldReceiveTouch &amp;&amp; <span class="keyword">self</span>.presentedViewController) &#123;</span><br><span class="line">        shouldReceiveTouch = <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> shouldReceiveTouch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-12-21T12:54:45.000Z" title="2017-12-21T12:54:45.000Z">2017-12-21</time><span class="level-item">a minute read (About 221 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-NSCollectionView-programatically-in-Swift/">How to make NSCollectionView programatically in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/131" target="_blank" rel="noopener">#131</a></strong></p>
<p>Here‚Äôs how to create <code>NSCollectionView</code> programatically. We need to embed it inside <code>NScrollView</code> for scrolling to work. Code is in Swift 4</p>
<h3 id="NSCollectionView"><a href="#NSCollectionView" class="headerlink" title="NSCollectionView"></a>NSCollectionView</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> layout = <span class="type">NSCollectionViewFlowLayout</span>()</span><br><span class="line">layout.minimumLineSpacing = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">collectionView = <span class="type">NSCollectionView</span>()</span><br><span class="line">collectionView.dataSource = <span class="keyword">self</span></span><br><span class="line">collectionView.delegate = <span class="keyword">self</span></span><br><span class="line">collectionView.collectionViewLayout = layout</span><br><span class="line">collectionView.allowsMultipleSelection = <span class="literal">false</span></span><br><span class="line">collectionView.backgroundColors = [.clear]</span><br><span class="line">collectionView.isSelectable = <span class="literal">true</span></span><br><span class="line">collectionView.register(</span><br><span class="line">  <span class="type">Cell</span>.<span class="keyword">self</span>,</span><br><span class="line">  forItemWithIdentifier: <span class="type">NSUserInterfaceItemIdentifier</span>(rawValue: <span class="string">"Cell"</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="NScrollView"><a href="#NScrollView" class="headerlink" title="NScrollView"></a>NScrollView</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scrollView = <span class="type">NSScrollView</span>()</span><br><span class="line">scrollView.documentView = collectionView</span><br><span class="line">view.addSubview(scrollView)</span><br></pre></td></tr></table></figure>

<h3 id="NSCollectionViewItem"><a href="#NSCollectionViewItem" class="headerlink" title="NSCollectionViewItem"></a>NSCollectionViewItem</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Cell</span>: <span class="title">NSCollectionViewItem</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> label = <span class="type">Label</span>()</span><br><span class="line">  <span class="keyword">let</span> myImageView = <span class="type">NSImageView</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.view = <span class="type">NSView</span>()</span><br><span class="line">    <span class="keyword">self</span>.view.wantsLayer = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="NSCollectionViewDataSource"><a href="#NSCollectionViewDataSource" class="headerlink" title="NSCollectionViewDataSource"></a>NSCollectionViewDataSource</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, numberOfItemsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> coins.<span class="built_in">count</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, itemForRepresentedObjectAt indexPath: IndexPath)</span></span> -&gt; <span class="type">NSCollectionViewItem</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> cell = collectionView.makeItem(</span><br><span class="line">    withIdentifier: <span class="type">NSUserInterfaceItemIdentifier</span>(rawValue: <span class="string">"Cell"</span>),</span><br><span class="line">    <span class="keyword">for</span>: indexPath</span><br><span class="line">  ) <span class="keyword">as</span>! <span class="type">Cell</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> coin = coins[indexPath.item]</span><br><span class="line"></span><br><span class="line">  cell.label.stringValue = coin.name</span><br><span class="line">  cell.coinImageView.image =</span><br><span class="line">    <span class="type">NSImage</span>(named: <span class="type">NSImage</span>.<span class="type">Name</span>(rawValue: <span class="string">"USD"</span>))</span><br><span class="line">    ?? <span class="type">NSImage</span>(named: <span class="type">NSImage</span>.<span class="type">Name</span>(rawValue: <span class="string">"Others"</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="NSCollectionViewDelegateFlowLayout"><a href="#NSCollectionViewDelegateFlowLayout" class="headerlink" title="NSCollectionViewDelegateFlowLayout"></a>NSCollectionViewDelegateFlowLayout</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, didSelectItemsAt indexPaths: Set&lt;IndexPath&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> indexPath = indexPaths.first,</span><br><span class="line">    <span class="keyword">let</span> cell = collectionView.item(at: indexPath) <span class="keyword">as</span>? <span class="type">Cell</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, didDeselectItemsAt indexPaths: Set&lt;IndexPath&gt;)</span></span> &#123;</span><br><span class="line">  <span class="keyword">guard</span> <span class="keyword">let</span> indexPath = indexPaths.first,</span><br><span class="line">    <span class="keyword">let</span> cell = collectionView.item(at: indexPath) <span class="keyword">as</span>? <span class="type">Cell</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, layout collectionViewLayout: NSCollectionViewLayout, sizeForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">NSSize</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="type">NSSize</span>(</span><br><span class="line">    width: collectionView.frame.size.width,</span><br><span class="line">    height: <span class="number">40</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-12-20T15:58:30.000Z" title="2017-12-20T15:58:30.000Z">2017-12-20</time><span class="level-item">a minute read (About 172 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/UnsafePointer-in-Swift/">UnsafePointer in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/130" target="_blank" rel="noopener">#130</a></strong></p>
<p>Code is in Swift 4</p>
<h3 id="Constructing-UnsafeMutablePointer"><a href="#Constructing-UnsafeMutablePointer" class="headerlink" title="Constructing UnsafeMutablePointer"></a>Constructing UnsafeMutablePointer</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> byteCount = <span class="number">32</span></span><br><span class="line"><span class="keyword">let</span> result = <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">UInt8</span>&gt;.allocate(capacity: byteCount)</span><br></pre></td></tr></table></figure>

<h3 id="Data-to-UnsafePointer"><a href="#Data-to-UnsafePointer" class="headerlink" title="Data to UnsafePointer"></a>Data to UnsafePointer</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Data</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">toPointer</span><span class="params">()</span></span> -&gt; <span class="type">UnsafePointer</span>&lt;<span class="type">UInt8</span>&gt;? &#123;</span><br><span class="line">    <span class="keyword">let</span> buffer = <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">UInt8</span>&gt;.allocate(capacity: <span class="built_in">count</span>)</span><br><span class="line">    <span class="keyword">let</span> stream = <span class="type">OutputStream</span>(toBuffer: buffer, capacity: <span class="built_in">count</span>)</span><br><span class="line"></span><br><span class="line">    stream.<span class="keyword">open</span>()</span><br><span class="line">    withUnsafeBytes(&#123; (p: <span class="type">UnsafePointer</span>&lt;<span class="type">UInt8</span>&gt;) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">      stream.write(p, maxLength: <span class="built_in">count</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    stream.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">UnsafePointer</span>&lt;<span class="type">UInt8</span>&gt;(buffer)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="UnsafePointer-to-Data"><a href="#UnsafePointer-to-Data" class="headerlink" title="UnsafePointer to Data"></a>UnsafePointer to Data</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UnsafePointer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">toData</span><span class="params">()</span></span> -&gt; <span class="type">Data</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Data</span>(bytes: <span class="type">UnsafeRawPointer</span>(<span class="keyword">self</span>), <span class="built_in">count</span>: <span class="number">32</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dealing-with-C-API"><a href="#Dealing-with-C-API" class="headerlink" title="Dealing with C API"></a>Dealing with C API</h3><p>This is how to do keccak hash using C API from <a href="https://github.com/ethereum/ethash/blob/master/src/libethash/sha3.c" target="_blank" rel="noopener">https://github.com/ethereum/ethash/blob/master/src/libethash/sha3.c</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KeccakHash</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">hash</span><span class="params">(data: Data)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">Data</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> dataPointer = data.toPointer() <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="type">InteralError</span>.invalid</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> byteCount = <span class="number">32</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> result = <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">UInt8</span>&gt;.allocate(capacity: byteCount)</span><br><span class="line">    sha3_256(result, byteCount, dataPointer, data.<span class="built_in">count</span>)</span><br><span class="line">    <span class="keyword">return</span> result.toData()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li>See <a href="https://github.com/onmyway133/Reindeers/blob/master/Sources/Extensions.swift" target="_blank" rel="noopener">https://github.com/onmyway133/Reindeers/blob/master/Sources/Extensions.swift</a></li>
<li><a href="https://oleb.net/blog/2017/12/importing-c-library-into-swift/" target="_blank" rel="noopener"><br>How to import a C library in Swift using the Swift Package Manager</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-12-20T09:40:35.000Z" title="2017-12-20T09:40:35.000Z">2017-12-20</time><span class="level-item">3 minutes read (About 478 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-prevent-UIVisualEffectView-crash/">How to prevent UIVisualEffectView crash</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/124" target="_blank" rel="noopener">#124</a></strong></p>
<p>We all know that there‚Äôs a potential crash with <code>UIVisualEffectView</code> on iOS 11. The fix is to not add sub views directly to <code>UIVisualEffectView</code>, but to its <code>contentView</code>. So we should change</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">effectView.addSubview(button)</span><br></pre></td></tr></table></figure>

<p>to </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">effectView.contentView.addubView(button)</span><br></pre></td></tr></table></figure>

<p>Here we don‚Äôt need to perform iOS version check, because <code>effectView.contentView</code> works for any iOS versions.</p>
<h3 id="Potential-cases-for-crashes"><a href="#Potential-cases-for-crashes" class="headerlink" title="Potential cases for crashes"></a>Potential cases for crashes</h3><p>Here are some cases you can potentially cause the crashes</p>
<p><strong><em>Strange namings</em></strong></p>
<p>Normally we name our <code>UIVisualEffectView</code> as <code>blurView</code>, <code>effectView</code>. But there‚Äôs times we name it differently like <code>navigationView</code>, <code>containerView</code>, <code>boxView</code>, ‚Ä¶ This way we may completely forget that it‚Äôs a <code>UIVisualEffectView</code> üôÄ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">containerView.addSubview(button)</span><br><span class="line">boxView.insertSubview(label, at: <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p><strong><em>Custom loadView</em></strong></p>
<p>Sometimes it‚Äôs convenient to have our <code>UIViewController &#39;s view</code> as a whole blur view, so that all things inside have a nice blur effect background</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OverlayController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> blurView = <span class="type">UIVisualEffectView</span>(effect: <span class="type">UIBlurEffect</span>(style: .dark))</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.loadView()</span><br><span class="line">    <span class="keyword">self</span>.view = blurView</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    view.addSubview(button)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>By setting our <code>blurView</code> as <code>view</code> in <code>loadView</code>, we have no idea afterwards that <code>view</code> is actually a <code>UIVisualEffectView</code> üôÄ </p>
<p><strong><em>Inheritance</em></strong></p>
<p>What happen if we have another <code>UIViewController</code> that inherits from our <code>OverlayController</code>, all it knows about <code>view</code> is <code>UIView</code>, it does not know that it is a disguising <code>UIVisualEffectView</code> üôÄ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClocksController</span>: <span class="title">OverlayController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    view.addSubview(timeLabel)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>Superclass type</em></strong></p>
<p>Sometimes declare our things but with protocol or superclass types. Consumers of our API have no clue to know that it is <code>UIVisualEffectView</code> üôÄ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> view: <span class="type">UIView</span> = <span class="type">UIVisualEffectView</span>(effect: <span class="type">UIBlurEffect</span>(style: .dark))</span><br></pre></td></tr></table></figure>

<p>Here it appears to us that <code>view</code> is of type <code>UIView</code></p>
<p><strong><em>Legacy codebase</em></strong></p>
<p>Now imagine you ‚Äòve handled a legacy codebase to deal with. Perform finding and replacing all those things related to <code>UIVisualEffectView</code> is very hard task. Especially since we tend to write less tests for UI</p>
<h3 id="Making-it-impossible-to-crash"><a href="#Making-it-impossible-to-crash" class="headerlink" title="Making it impossible to crash"></a>Making it impossible to crash</h3><p>I like concept like <a href="https://wiki.haskell.org/Phantom_type" target="_blank" rel="noopener">Phantom type</a> to limit interface. Here we‚Äôre not using type but a wrapper </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">BlurView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">let</span> effectView: <span class="type">UIVisualEffectView</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">init</span>(style: <span class="type">UIBlurEffectStyle</span>, backgroundColor: <span class="type">UIColor?</span> = <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.effectView = <span class="type">UIVisualEffectView</span>(effect: <span class="type">UIBlurEffect</span>(style: style))</span><br><span class="line">    <span class="keyword">self</span>.effectView.backgroundColor = backgroundColor</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(frame: .zero)</span><br><span class="line">    insertSubview(effectView, at: <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">    <span class="built_in">fatalError</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">addSubview</span><span class="params">(<span class="number">_</span> view: UIView)</span></span> &#123;</span><br><span class="line">    effectView.contentView.addSubview(view)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.layoutSubviews()</span><br><span class="line"></span><br><span class="line">    effectView.frame = bounds</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Here we override <code>addSubview</code> to always add views to <code>effectView.contentView</code>. In the <code>init</code> method, we need to call <code>insertSubview</code> instead because of our overriden <code>addSubview</code></p>
<p>Now <code>BlurView</code> has a blur effect thanks to is underlying <code>UIVisualEffectView</code>, but expose only <code>addSubview</code> because of its <code>UIView</code> interface. This way it is impossible to cause crashes üòé </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> blurView = <span class="type">BlurView</span>(style: .dark)</span><br><span class="line">blurView.addSubview(button(</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-12-18T14:41:21.000Z" title="2017-12-18T14:41:21.000Z">2017-12-18</time><span class="level-item">7 minutes read (About 1122 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Understanding-suspend-function-in-Kotlin-Coroutine-in-Android/">Understanding suspend function in Kotlin Coroutine in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/123" target="_blank" rel="noopener">#123</a></strong></p>
<h2 id="Getting-to-know-Coroutine"><a href="#Getting-to-know-Coroutine" class="headerlink" title="Getting to know Coroutine"></a>Getting to know Coroutine</h2><p>From <a href="https://kotlinlang.org/docs/reference/coroutines.html" target="_blank" rel="noopener">https://kotlinlang.org/docs/reference/coroutines.html</a></p>
<blockquote>
<p>To continue the analogy, await() can be a suspending function (hence also callable from within an async {} block) that suspends a coroutine until some computation is done and returns its result:</p>
</blockquote>
<p>From <a href="https://kotlinlang.org/docs/tutorials/coroutines-basic-jvm.html" target="_blank" rel="noopener">https://kotlinlang.org/docs/tutorials/coroutines-basic-jvm.html</a></p>
<blockquote>
<p>We are using the delay() function that‚Äôs like Thread.sleep(), but better: it doesn‚Äôt block a thread, but only suspends the coroutine itself. The thread is returned to the pool while the coroutine is waiting, and when the waiting is done, the coroutine resumes on a free thread in the pool.</p>
</blockquote>
<blockquote>
<p>await() can not be called outside a coroutine, because it needs to suspend until the computation finishes, and only coroutines can suspend in a non-blocking way</p>
</blockquote>
<h2 id="What-does-suspend-function-mean-in-Kotlin-Coroutine-ü§î"><a href="#What-does-suspend-function-mean-in-Kotlin-Coroutine-ü§î" class="headerlink" title="What does suspend function mean in Kotlin Coroutine ü§î"></a>What does suspend function mean in Kotlin Coroutine ü§î</h2><p><a href="https://stackoverflow.com/questions/47871868/what-does-suspend-function-mean-in-kotlin-coroutine" target="_blank" rel="noopener">https://stackoverflow.com/questions/47871868/what-does-suspend-function-mean-in-kotlin-coroutine</a></p>
<p>I‚Äôm reading Kotlin Coroutine and know that it is based on suspend function. But what does suspend mean?</p>
<p>Coroutine or function gets suspended?</p>
<p>From <a href="https://kotlinlang.org/docs/reference/coroutines.html" target="_blank" rel="noopener">https://kotlinlang.org/docs/reference/coroutines.html</a></p>
<p>Basically, coroutines are computations that can be suspended without blocking a thread</p>
<p>I heard people often say ‚Äúsuspend function‚Äù. But I think it is the coroutine who gets suspended because it is waiting for the function to finished? ‚Äúsuspend‚Äù usually means ‚Äúcease operation‚Äù, in this case the coroutine is idle.</p>
<p>Should we say the coroutine is suspended ?</p>
<p>Which coroutine gets suspended?</p>
<p>From <a href="https://kotlinlang.org/docs/reference/coroutines.html" target="_blank" rel="noopener">https://kotlinlang.org/docs/reference/coroutines.html</a></p>
<p>To continue the analogy, await() can be a suspending function (hence also callable from within an async {} block) that suspends a coroutine until some computation is done and returns its result:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">async &#123; <span class="comment">// Here I call it the outer async coroutine</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// Here I call computation the inner coroutine</span></span><br><span class="line">    <span class="keyword">val</span> result = computation.await()</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ü§î It says ‚Äúthat suspends a coroutine until some computation is done‚Äù, but coroutine is like a lightweight thread. So if the coroutine is suspended, how can the computation is done ?</p>
<p>We see await is called on computation, so it might be async that returns Deferred, which means it can start another coroutine</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">computation</span><span class="params">()</span></span>: Deferred&lt;<span class="built_in">Boolean</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> async &#123;</span><br><span class="line">        <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ü§î The quote say that suspends a coroutine. Does it mean suspend the outer async coroutine, or suspend the inner computation coroutine?</p>
<p>Does suspend mean that while outer async coroutine is waiting (await) for the inner computation coroutine to finish, it (the outer async coroutine) idles (hence the name suspend) and returns thread to the thread pool, and when the child computation coroutine finishes, it (the outer async coroutine) wakes up, takes another thread from the pool and continues?</p>
<p>The reason I mention the thread is because of <a href="https://kotlinlang.org/docs/tutorials/coroutines-basic-jvm.html" target="_blank" rel="noopener">https://kotlinlang.org/docs/tutorials/coroutines-basic-jvm.html</a></p>
<p>The thread is returned to the pool while the coroutine is waiting, and when the waiting is done, the coroutine resumes on a free thread in the pool</p>
<h2 id="Understanding-async"><a href="#Understanding-async" class="headerlink" title="Understanding async"></a>Understanding async</h2><p>From <a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md" target="_blank" rel="noopener">https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md</a></p>
<blockquote>
<p>Conceptually, async is just like launch. It starts a separate coroutine which is a light-weight thread that works concurrently with all the other coroutines. The difference is that launch returns a Job and does not carry any resulting value, while async returns a Deferred ‚Äì a light-weight non-blocking future that represents a promise to provide a result later. You can use .await() on a deferred value to get its eventual result, but Deferred is also a Job, so you can cancel it if needed.</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> = runBlocking&lt;<span class="built_in">Unit</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> time = measureTimeMillis &#123;</span><br><span class="line">        <span class="keyword">val</span> one = async &#123; doSomethingUsefulOne() &#125;</span><br><span class="line">        <span class="keyword">val</span> two = async &#123; doSomethingUsefulTwo() &#125;</span><br><span class="line">        println(<span class="string">"The answer is <span class="subst">$&#123;one.await() + two.await()&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"Completed in <span class="variable">$time</span> ms"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>There is a laziness option to async using an optional start parameter with a value of CoroutineStart.LAZY. It starts coroutine only when its result is needed by some await or if a start function is invoked. Run the following example that differs from the previous one only by this option:</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> = runBlocking&lt;<span class="built_in">Unit</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> time = measureTimeMillis &#123;</span><br><span class="line">        <span class="keyword">val</span> one = async(start = CoroutineStart.LAZY) &#123; doSomethingUsefulOne() &#125;</span><br><span class="line">        <span class="keyword">val</span> two = async(start = CoroutineStart.LAZY) &#123; doSomethingUsefulTwo() &#125;</span><br><span class="line">        println(<span class="string">"The answer is <span class="subst">$&#123;one.await() + two.await()&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"Completed in <span class="variable">$time</span> ms"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="What-is-the-difference-between-launch-join-and-async-await-in-Kotlin-coroutines"><a href="#What-is-the-difference-between-launch-join-and-async-await-in-Kotlin-coroutines" class="headerlink" title="What is the difference between launch/join and async/await in Kotlin coroutines"></a>What is the difference between launch/join and async/await in Kotlin coroutines</h2><p><a href="https://stackoverflow.com/a/48079738/1418457" target="_blank" rel="noopener">https://stackoverflow.com/a/48079738/1418457</a></p>
<p>I find this guide <a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md" target="_blank" rel="noopener">https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md</a> to be useful. I will quote the essential parts</p>
<p>ü¶Ñ coroutine</p>
<p>Essentially, coroutines are light-weight threads.</p>
<p>So you can think of coroutine as something that manages thread in a very efficient way.</p>
<p>üê§ launch</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    launch &#123; <span class="comment">// launch new coroutine in background and continue</span></span><br><span class="line">        delay(<span class="number">1000L</span>) <span class="comment">// non-blocking delay for 1 second (default time unit is ms)</span></span><br><span class="line">        println(<span class="string">"World!"</span>) <span class="comment">// print after delay</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"Hello,"</span>) <span class="comment">// main thread continues while coroutine is delayed</span></span><br><span class="line">    Thread.sleep(<span class="number">2000L</span>) <span class="comment">// block main thread for 2 seconds to keep JVM alive</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So launch starts a background thread, does something, and returns a token immediately as Job. You can call join on this Job to block until this launch thread completes</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> = runBlocking&lt;<span class="built_in">Unit</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> job = launch &#123; <span class="comment">// launch new coroutine and keep a reference to its Job</span></span><br><span class="line">        delay(<span class="number">1000L</span>)</span><br><span class="line">        println(<span class="string">"World!"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"Hello,"</span>)</span><br><span class="line">    job.join() <span class="comment">// wait until child coroutine completes</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ü¶Ü async</p>
<p>Conceptually, async is just like launch. It starts a separate coroutine which is a light-weight thread that works concurrently with all the other coroutines. The difference is that launch returns a Job and does not carry any resulting value, while async returns a Deferred ‚Äì a light-weight non-blocking future that represents a promise to provide a result later.</p>
<p>So async starts a background thread, does something, and returns a token immediately as Deferred.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> = runBlocking&lt;<span class="built_in">Unit</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> time = measureTimeMillis &#123;</span><br><span class="line">        <span class="keyword">val</span> one = async &#123; doSomethingUsefulOne() &#125;</span><br><span class="line">        <span class="keyword">val</span> two = async &#123; doSomethingUsefulTwo() &#125;</span><br><span class="line">        println(<span class="string">"The answer is <span class="subst">$&#123;one.await() + two.await()&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"Completed in <span class="variable">$time</span> ms"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>You can use .await() on a deferred value to get its eventual result, but Deferred is also a Job, so you can cancel it if needed.</p>
<p>So Deferred is actually a Job. See <a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-deferred/index.html" target="_blank" rel="noopener">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-deferred/index.html</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Deferred</span>&lt;<span class="type">out T</span>&gt; : <span class="type">Job </span></span>(source)</span><br></pre></td></tr></table></figure>

<p>ü¶ã async is eager by default</p>
<p>There is a laziness option to async using an optional start parameter with a value of CoroutineStart.LAZY. It starts coroutine only when its result is needed by some await or if a start function is invoked.</p>
<h2 id="Understand-Kotlin-Coroutines-on-Android-Google-I-O‚Äô19"><a href="#Understand-Kotlin-Coroutines-on-Android-Google-I-O‚Äô19" class="headerlink" title="Understand Kotlin Coroutines on Android (Google I/O‚Äô19)"></a>Understand Kotlin Coroutines on Android (Google I/O‚Äô19)</h2><p><a href="https://www.youtube.com/watch?v=BOHK_w09pVA" target="_blank" rel="noopener">https://www.youtube.com/watch?v=BOHK_w09pVA</a></p>
<img width="1176" alt="cor" src="https://user-images.githubusercontent.com/2284279/57587873-6836f400-750c-11e9-9944-2c00b8d83a87.png">
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/15/">Previous</a></div><div class="pagination-next"><a href="/page/17/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/15/">15</a></li><li><a class="pagination-link is-current" href="/page/16/">16</a></li><li><a class="pagination-link" href="/page/17/">17</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/20/">20</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://avatars1.githubusercontent.com/u/2284279?s=460&amp;v=4" alt="Khoa"></figure><p class="title is-size-4 is-block line-height-inherit">Khoa</p><p class="is-size-6 is-block">iOS, macOS, Android, React. Serial maker. Writer. Speaker.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Oslo, Norway</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">594</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">52</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/onmyway133" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/onmyway133"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://onmyway133.com/apps" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Apps</span></span><span class="level-right"><span class="level-item tag">onmyway133.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://learntalks.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Learn Talks</span></span><span class="level-right"><span class="level-item tag">learntalks.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-28T10:56:09.000Z">2020-04-28</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-webpack-to-bundle-html-css-js/">How to use webpack to bundle html css js</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-28T07:23:52.000Z">2020-04-28</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-assert-asynchronously-in-XCTest/">How to assert asynchronously in XCTest</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-27T20:01:47.000Z">2020-04-27</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-make-simple-filter-menu-in-css/">How to make simple filter menu in css</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-26T16:53:52.000Z">2020-04-26</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-make-simple-grid-gallery-in-css/">How to make simple grid gallery in css</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-26T02:57:51.000Z">2020-04-26</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-add-independent-page-in-hexo/">How to add independent page in hexo</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">42</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">48</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag is-grey-lightest">35</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apple-script/"><span class="tag">apple script</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/catalyst/"><span class="tag">catalyst</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ci/"><span class="tag">ci</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cloud/"><span class="tag">cloud</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cocoapods/"><span class="tag">cocoapods</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/combine/"><span class="tag">combine</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/core-data/"><span class="tag">core data</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dart/"><span class="tag">dart</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">design</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/electron/"><span class="tag">electron</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firebase/"><span class="tag">firebase</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google/"><span class="tag">google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">158</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag is-grey-lightest">40</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">25</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layout/"><span class="tag">layout</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/links/"><span class="tag">links</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">97</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/maps/"><span class="tag">maps</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/networking/"><span class="tag">networking</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/objc/"><span class="tag">objc</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/realm/"><span class="tag">realm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rx/"><span class="tag">rx</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/script/"><span class="tag">script</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spm/"><span class="tag">spm</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">268</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swiftUI/"><span class="tag">swiftUI</span><span class="tag is-grey-lightest">49</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tech/"><span class="tag">tech</span><span class="tag is-grey-lightest">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/watchOS/"><span class="tag">watchOS</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wwdc/"><span class="tag">wwdc</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xcode/"><span class="tag">xcode</span><span class="tag is-grey-lightest">24</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=c2r59mmt2n5k0o5dt5vv3nq4u4&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="c2r59mmt2n5k0o5dt5vv3nq4u4" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a><p class="size-small"><span>&copy; 2020 Khoa Pham</span>¬†¬†Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>¬†&amp;¬†<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://onmyway133.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">√ó</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>