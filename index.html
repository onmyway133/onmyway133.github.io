<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="ios, android, kotlin, mac, swift, electron, javascript, node">
  
  
  
  
  <meta name="description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta name="keywords" content="ios, android,javascript, react">
<meta property="og:type" content="website">
<meta property="og:title" content="onmyway133">
<meta property="og:url" content="https://onmyway133.github.io/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onmyway133">
<meta name="twitter:description" content="What you don&apos;t know is what you haven&apos;t learned">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-How-to-use-TabView-with-enum-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-TabView-with-enum-in-SwiftUI/">How to use TabView with enum in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-TabView-with-enum-in-SwiftUI/" class="article-date">
	  <time datetime="2020-02-11T05:38:53.000Z" itemprop="datePublished">February 11, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/599" target="_blank" rel="noopener">#599</a></strong></p>
<p>Specify tag</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Authentication</span>: <span class="title">Int</span>, <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> key</span><br><span class="line">    <span class="keyword">case</span> certificate</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">TabView</span>(selection: $authentication) &#123;</span><br><span class="line">    <span class="type">KeyAuthenticationView</span>()</span><br><span class="line">        .tabItem &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"ðŸ”‘ Key"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .tag(<span class="type">Authentication</span>.key)</span><br><span class="line">    <span class="type">CertificateAuthenticationView</span>()</span><br><span class="line">        .tabItem &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"ðŸ“° Certificate"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .tag(<span class="type">Authentication</span>.certificate)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-build-SwiftUI-style-UICollectionView-data-source-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-build-SwiftUI-style-UICollectionView-data-source-in-Swift/">How to build SwiftUI style UICollectionView data source in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-build-SwiftUI-style-UICollectionView-data-source-in-Swift/" class="article-date">
	  <time datetime="2020-02-09T21:01:24.000Z" itemprop="datePublished">February 9, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/598" target="_blank" rel="noopener">#598</a></strong></p>
<p>Itâ€™s hard to see any iOS app which donâ€™t use UITableView or UICollectionView, as they are the basic and important foundation to represent data. <code>UICollectionView</code> is very basic to use, yet a bit tedious for common use cases, but if we abstract over it, then it becomes super hard to  customize. Every app is unique, and any attempt to wrap around UICollectionView will fail horribly. A sensable approach for a good abstraction is to make it super easy for normal cases, and easy to customize for advanced scenarios.</p>
<p>Iâ€™m always interested in how to make UICollectionView easier and fun to write and have curated many open sources here <a href="https://github.com/onmyway133/fantastic-ios-architecture#data-source" target="_blank" rel="noopener">data source</a>. Many of these data source libraries try to come up with totally different namings and complex paradigm which makes it hard to onboard, and many are hard to customize.</p>
<p>In its simplest form, what we want in a UICollectionView data source is <code>cell = f(state)</code>, which means our cell representation is just a function of the state. We just want to set model to the cell, the correct cell, in a type safe manner.</p>
<h2 id="Generic-data-source"><a href="#Generic-data-source" class="headerlink" title="Generic data source"></a>Generic data source</h2><p>The basic is to make a generic data source that sticks with a particular cell</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataSource</span>&lt;<span class="title">T</span>&gt;: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> items: [<span class="type">T</span>]</span><br><span class="line">    <span class="keyword">let</span> configure: (<span class="type">T</span>, <span class="type">UICollectionViewCell</span>) -&gt; <span class="type">Void</span></span><br><span class="line">    <span class="keyword">let</span> select: (<span class="type">UICollectionViewCell</span>, <span class="type">IndexPath</span>) -&gt; <span class="type">Void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This works for basic usage, and we can create multiple DataSource for each kind of model. The problem is itâ€™s hard to subclass DataSource as generic in Swift and inheritance for ObjcC NSObject donâ€™t work well.</p>
<h2 id="Check-for-the-types"><a href="#Check-for-the-types" class="headerlink" title="Check for the types"></a>Check for the types</h2><p>Seeing the problem with generic data source, Iâ€™ve tried another approach with <a href="https://github.com/onmyway133/Upstream" target="_blank" rel="noopener">Upstream</a> where itâ€™s easier to declare sections and models.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sections: [<span class="type">Section</span>] = [</span><br><span class="line">    <span class="type">Section</span>(</span><br><span class="line">        header: <span class="type">Header</span>(model: <span class="type">Model</span>.header(<span class="string">"Information"</span>), viewType: <span class="type">HeaderView</span>.<span class="keyword">self</span>),</span><br><span class="line">        items: [</span><br><span class="line">            <span class="type">Item</span>(model: <span class="type">Model</span>.avatar(avatarUrl), cellType: <span class="type">AvatarCell</span>.<span class="keyword">self</span>),</span><br><span class="line">            <span class="type">Item</span>(model: <span class="type">Model</span>.name(<span class="string">"Thor"</span>), cellType: <span class="type">NameCell</span>.<span class="keyword">self</span>),</span><br><span class="line">            <span class="type">Item</span>(model: <span class="type">Model</span>.location(<span class="string">"Asgard"</span>), cellType: <span class="type">NameCell</span>.<span class="keyword">self</span>)</span><br><span class="line">        ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="type">Section</span>(</span><br><span class="line">        header: <span class="type">Header</span>(model: <span class="type">Model</span>.header(<span class="string">"Skills"</span>), viewType: <span class="type">HeaderView</span>.<span class="keyword">self</span>),</span><br><span class="line">        items: [</span><br><span class="line">            <span class="type">Item</span>(model: <span class="type">Model</span>.skill(<span class="string">"iOS"</span>), cellType: <span class="type">SkillCell</span>.<span class="keyword">self</span>),</span><br><span class="line">            <span class="type">Item</span>(model: <span class="type">Model</span>.skill(<span class="string">"Android"</span>), cellType: <span class="type">SkillCell</span>.<span class="keyword">self</span>)</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">adapter.reload(sections: sections)</span><br></pre></td></tr></table></figure>

<p>This uses the Adapter pattern and we need to handle <code>AdapterDelegate</code>. To avoid the generic problem, this Adapter store items as <code>Any</code>, so we need to type cast all the time.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ProfileViewController</span>: <span class="title">AdapterDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">(model: <span class="keyword">Any</span>, view: UIView, indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> model = model <span class="keyword">as</span>? <span class="type">Model</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (model, view) &#123;</span><br><span class="line">        <span class="keyword">case</span> (.avatar(<span class="keyword">let</span> string), <span class="keyword">let</span> cell <span class="keyword">as</span> <span class="type">Avatarcell</span>):</span><br><span class="line">            cell.configure(string: string)</span><br><span class="line">        <span class="keyword">case</span> (.name(<span class="keyword">let</span> name), <span class="keyword">let</span> cell <span class="keyword">as</span> <span class="type">NameCell</span>):</span><br><span class="line">            cell.configure(string: name)</span><br><span class="line">        <span class="keyword">case</span> (.header(<span class="keyword">let</span> string), <span class="keyword">let</span> view <span class="keyword">as</span> <span class="type">HeaderView</span>):</span><br><span class="line">            view.configure(string: string)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The benefit is that we can easily subclass this Adapter manager to customize the behaviour, here is how to make accordion </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccordionManager</span>&lt;<span class="title">T</span>&gt;: <span class="title">Manager</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> collapsedSections = <span class="type">Set</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> collapsedSections.<span class="built_in">contains</span>(section)</span><br><span class="line">            ? <span class="number">0</span> : sections[section].items.<span class="built_in">count</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toggle</span><span class="params">(section: Int)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> collapsedSections.<span class="built_in">contains</span>(section) &#123;</span><br><span class="line">            collapsedSections.remove(section)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            collapsedSections.insert(section)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> indexSet = <span class="type">IndexSet</span>(integer: section)</span><br><span class="line">        tableView?.reloadSections(indexSet, with: .automatic)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SwiftUI"><a href="#SwiftUI" class="headerlink" title="SwiftUI"></a>SwiftUI</h2><p>SwiftUI comes in iOS 13 with a very concise and easy to use syntax. SwiftUI has good diffing so we just need to update our models so the whole content will be diffed and rendered again.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">List</span> &#123;</span><br><span class="line">        <span class="type">ForEach</span>(blogs) &#123; blog <span class="keyword">in</span></span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(blog.name)</span><br><span class="line">            &#125;</span><br><span class="line">            .onTap &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"cell was tapped"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SwiftUI-style-with-diffing"><a href="#SwiftUI-style-with-diffing" class="headerlink" title="SwiftUI style with diffing"></a>SwiftUI style with diffing</h2><p>I built <a href="https://github.com/onmyway133/DeepDiff" target="_blank" rel="noopener">DeepDiff</a> before and it was used by many people. Now Iâ€™m pleased to introduce <a href="https://github.com/onmyway133/Micro" target="_blank" rel="noopener">Micro</a> which is a SwiftU style with DeepDiff powered  so it performs fast diffing whenever state changes.</p>
<p>With <code>Micro</code> we can just use the familiar <code>forEach</code> to declare <code>Cell</code>, and the returned <code>State</code> will tell <code>DataSource</code> to update the <code>UICollectionView</code>.</p>
<p>Every time <code>state</code> is assigned, <code>UICollectionView</code> will be fast diffed and reloaded. The only requirement is that your model should conform to <code>DiffAware</code> with <code>diffId</code> so DeepDiff knows how to diff for changes.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dataSource = <span class="type">DataSource</span>(collectionView: collectionView)</span><br><span class="line">dataSource.state = <span class="type">State</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(blogs) &#123; blog <span class="keyword">in</span></span><br><span class="line">        <span class="type">Cell</span>&lt;<span class="type">BlogCell</span>&gt;() &#123; context, cell <span class="keyword">in</span></span><br><span class="line">            cell.nameLabel.text = blog.name</span><br><span class="line">        &#125;</span><br><span class="line">        .onSelect &#123; context <span class="keyword">in</span> </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"cell at index \(context.indexPath.item) is selected"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .onSize &#123; context <span class="keyword">in</span> </span><br><span class="line">            <span class="type">CGSize</span>(</span><br><span class="line">                width: context.collectionView.frame.size.width, </span><br><span class="line">                height: <span class="number">40</span></span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>DataSource</code> is completely overridable, if you want to customize any methods, just subclass <code>DataSource</code>, override methods and access its <code>state.models</code> </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomDataSource</span>: <span class="title">DataSource</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> blog = state.models[indexPath.item] <span class="keyword">as</span>? <span class="type">Blog</span></span><br><span class="line">        <span class="built_in">print</span>(blog)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Diffable-data-source-in-iOS-13"><a href="#Diffable-data-source-in-iOS-13" class="headerlink" title="Diffable data source in iOS 13"></a>Diffable data source in iOS 13</h2><p>In iOS 13,  Apple adds <a href="https://developer.apple.com/documentation/uikit/views_and_controls/collection_views/using_collection_view_compositional_layouts_and_diffable_data_sources" target="_blank" rel="noopener">Using Collection View Compositional Layouts and Diffable Data Sources</a> which is very handy.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeDataSource</span><span class="params">()</span></span> -&gt; <span class="type">UITableViewDiffableDataSource</span>&lt;<span class="type">Section</span>, <span class="type">Contact</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> reuseIdentifier = cellReuseIdentifier</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">UICollectionViewDiffableDataSource</span>(</span><br><span class="line">        collectionView: collectionView,</span><br><span class="line">        cellProvider: &#123;  collectionView, indexPath, blog <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> cell = tableView.dequeueReusableCell(</span><br><span class="line">                withIdentifier: reuseIdentifier,</span><br><span class="line">                <span class="keyword">for</span>: indexPath</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            cell.textLabel?.text = blog.name</span><br><span class="line">            cell.detailTextLabel?.text = blog.email</span><br><span class="line">            <span class="keyword">return</span> cell</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This is iOS 13+  only, and the main components are the <code>cellProvider</code> acting as <code>cellForItemAtIndexPath</code>, and the snapshot for diffing. It also supports section.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> snapshot = <span class="type">NSDiffableDataSourceSnapshot</span>&lt;<span class="type">Section</span>, <span class="type">Blog</span>&gt;()</span><br><span class="line">dataSource.apply(snapshot, animatingDifferences: animate)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-round-border-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-round-border-in-SwiftUI/">How to make round border in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-round-border-in-SwiftUI/" class="article-date">
	  <time datetime="2020-02-05T04:35:10.000Z" itemprop="datePublished">February 5, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/597" target="_blank" rel="noopener">#597</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextView</span>(font: <span class="type">R</span>.font.text!, lineCount: <span class="literal">nil</span>, text: $text, isFocus: $isFocus)</span><br><span class="line">.padding(<span class="number">8</span>)</span><br><span class="line">.background(<span class="type">R</span>.color.inputBackground)</span><br><span class="line">.cornerRadius(<span class="number">10</span>)</span><br><span class="line">.overlay(</span><br><span class="line">    <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">10</span>)</span><br><span class="line">        .stroke(isFocus ? <span class="type">R</span>.color.inputBorderFocus : <span class="type">Color</span>.clear, lineWidth: <span class="number">1</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-mock-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-mock-in-Swift/">How to mock in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-mock-in-Swift/" class="article-date">
	  <time datetime="2020-02-04T13:32:54.000Z" itemprop="datePublished">February 4, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/596" target="_blank" rel="noopener">#596</a></strong></p>
<h2 id="Unavailable-init"><a href="#Unavailable-init" class="headerlink" title="Unavailable init"></a>Unavailable init</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UNUserNotificationCenter</span>.current().getNotificationSettings(completionHandler: &#123; (settings: <span class="type">UNNotificationSettings</span>) <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">let</span> status: <span class="type">UNAuthorizationStatus</span> = .authorized</span><br><span class="line">    settings.setValue(status.rawValue, forKey: <span class="string">"authorizationStatus"</span>)</span><br><span class="line">    completionHandler(settings)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-change-background-color-in-List-in-SwiftUI-for-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-change-background-color-in-List-in-SwiftUI-for-macOS/">How to change background color in List in SwiftUI for macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-change-background-color-in-List-in-SwiftUI-for-macOS/" class="article-date">
	  <time datetime="2020-02-04T05:10:59.000Z" itemprop="datePublished">February 4, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/595" target="_blank" rel="noopener">#595</a></strong></p>
<p>SwiftUI uses <code>ListCoreScrollView</code> and <code>ListCoreClipView</code> under the hood. For now the workaround, is to avoid using <code>List</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>use</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-add-drag-and-drop-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-add-drag-and-drop-in-SwiftUI/">How to add drag and drop in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-add-drag-and-drop-in-SwiftUI/" class="article-date">
	  <time datetime="2020-02-04T04:41:45.000Z" itemprop="datePublished">February 4, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/594" target="_blank" rel="noopener">#594</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SelectFileView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> buttonTitle: <span class="type">String</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> isDrop: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">            <span class="type">Button</span>(action: &#123;&#125;) &#123;</span><br><span class="line">                <span class="type">Text</span>(buttonTitle)</span><br><span class="line">            &#125;</span><br><span class="line">            .buttonStyle(<span class="type">ActionButtonStyle</span>())</span><br><span class="line">            .offset(x: -<span class="number">16</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Alternatively, you can drag and drop file here"</span>)</span><br><span class="line">                .font(.footnote)</span><br><span class="line">                .foregroundColor(<span class="type">Color</span>.gray)</span><br><span class="line">        &#125;</span><br><span class="line">        .border(isDrop ? <span class="type">R</span>.color.separator : <span class="type">Color</span>.clear)</span><br><span class="line">        .onDrop(of: [<span class="type">Constants</span>.urlFileType], delegate: <span class="keyword">self</span>)</span><br><span class="line">        .padding(.bottom, <span class="number">32</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SelectFileView</span>: <span class="title">DropDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dropEntered</span><span class="params">(info: DropInfo)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.isDrop = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dropExited</span><span class="params">(info: DropInfo)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.isDrop = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">performDrop</span><span class="params">(info: DropInfo)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            <span class="keyword">let</span> itemProvider = info.itemProviders(<span class="keyword">for</span>: [<span class="type">Constants</span>.urlFileType]).first</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</span><br><span class="line"></span><br><span class="line">        itemProvider.loadItem(forTypeIdentifier: <span class="type">Constants</span>.urlFileType, options: <span class="literal">nil</span>) &#123; item, error <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span></span><br><span class="line">                <span class="keyword">let</span> data = item <span class="keyword">as</span>? <span class="type">Data</span>,</span><br><span class="line">                <span class="keyword">let</span> url = <span class="type">URL</span>(dataRepresentation: data, relativeTo: <span class="literal">nil</span>)</span><br><span class="line">            <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-weak-link-Combine-in-macOS-10.14-and-iOS-12"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-weak-link-Combine-in-macOS-10.14-and-iOS-12/">How to weak link Combine in macOS 10.14 and iOS 12</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-weak-link-Combine-in-macOS-10.14-and-iOS-12/" class="article-date">
	  <time datetime="2020-02-02T05:34:09.000Z" itemprop="datePublished">February 2, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/593" target="_blank" rel="noopener">#593</a></strong></p>
<p><code>#if canImport(Combine)</code> is not enough, need to specify in Other Linker Flags</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OTHER_LDFLAGS = -weak_framework Combine</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/questions/57168931/optional-linking-for-swift-combine-framework-in-xcode-11" target="_blank" rel="noopener">https://stackoverflow.com/questions/57168931/optional-linking-for-swift-combine-framework-in-xcode-11</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/combine/">combine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-radio-button-group-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-radio-button-group-in-SwiftUI/">How to make radio button group in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-radio-button-group-in-SwiftUI/" class="article-date">
	  <time datetime="2020-02-01T06:38:29.000Z" itemprop="datePublished">February 1, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/592" target="_blank" rel="noopener">#592</a></strong></p>
<h2 id="Use-picker-with-Radio-style"><a href="#Use-picker-with-Radio-style" class="headerlink" title="Use picker with Radio style"></a>Use picker with Radio style</h2><p>Hard to customize</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Picker</span>(selection: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt;.constant(<span class="literal">true</span>), label: <span class="type">EmptyView</span>()) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Production"</span>).tag(<span class="number">0</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Sandbox"</span>).tag(<span class="number">1</span>)</span><br><span class="line">&#125;.pickerStyle(<span class="type">RadioGroupPickerStyle</span>())</span><br></pre></td></tr></table></figure>

<h2 id="Use-custom-view"><a href="#Use-custom-view" class="headerlink" title="Use custom view"></a>Use custom view</h2><p>Use <code>contentShape</code> to make whole button tappable.<br>Make custom Binding for our enum</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EnvironmentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> input: <span class="type">Input</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">                <span class="type">RadioButton</span>(text: <span class="string">"Production"</span>, isOn: binding(<span class="keyword">for</span>: .production))</span><br><span class="line">                <span class="type">RadioButton</span>(text: <span class="string">"Sandbox"</span>, isOn: binding(<span class="keyword">for</span>: .sandbox))</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">binding</span><span class="params">(<span class="keyword">for</span> environment: Input.Environment)</span></span> -&gt; <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt; &#123;</span><br><span class="line">        <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt;(</span><br><span class="line">            <span class="keyword">get</span>: &#123; <span class="keyword">self</span>.input.environment == environment &#125;,</span><br><span class="line">            <span class="keyword">set</span>: &#123; flag <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">if</span> flag &#123;</span><br><span class="line">                    <span class="keyword">self</span>.input.environment = environment</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RadioButton</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> text: <span class="type">String</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> isOn: <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(action: &#123;</span><br><span class="line">            <span class="keyword">self</span>.isOn.toggle()</span><br><span class="line">        &#125;) &#123;</span><br><span class="line">            <span class="type">HStack</span>(alignment: .top) &#123;</span><br><span class="line">                <span class="type">Circle</span>()</span><br><span class="line">                    .fill(isOn ? <span class="type">R</span>.color.primary : <span class="type">Color</span>.clear)</span><br><span class="line">                    .overlay(<span class="type">Circle</span>().stroke(<span class="type">R</span>.color.primary))</span><br><span class="line">                    .frame(width: <span class="number">18</span>, height: <span class="number">18</span>)</span><br><span class="line">                <span class="type">Text</span>(text)</span><br><span class="line">                    .foregroundColor(<span class="type">R</span>.color.text)</span><br><span class="line">            &#125;</span><br><span class="line">            .contentShape(<span class="type">Rectangle</span>())</span><br><span class="line">        &#125;</span><br><span class="line">        .buttonStyle(<span class="type">RadioButtonStyle</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RadioButtonStyle</span>: <span class="title">ButtonStyle</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeBody</span><span class="params">(configuration: <span class="keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        configuration.label</span><br><span class="line">            .padding(.vertical, <span class="number">4</span>)</span><br><span class="line">            .padding(.horizontal, <span class="number">8</span>)</span><br><span class="line">            .border(<span class="type">SeparatorShapeStyle</span>(), width: <span class="number">0</span>)</span><br><span class="line">            .background(<span class="type">Color</span>.clear)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-set-font-to-NSTextField-in-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-set-font-to-NSTextField-in-macOS/">How to set font to NSTextField in macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-set-font-to-NSTextField-in-macOS/" class="article-date">
	  <time datetime="2020-01-29T19:59:47.000Z" itemprop="datePublished">January 29, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/591" target="_blank" rel="noopener">#591</a></strong></p>
<p>Use <code>NSTextView</code> instead</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-borderless-material-NSTextField-in-SwiftUI-for-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-borderless-material-NSTextField-in-SwiftUI-for-macOS/">How to make borderless material NSTextField in SwiftUI for macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-borderless-material-NSTextField-in-SwiftUI-for-macOS/" class="article-date">
	  <time datetime="2020-01-29T19:30:35.000Z" itemprop="datePublished">January 29, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/590" target="_blank" rel="noopener">#590</a></strong></p>
<p>Use custom <code>NSTextField</code> as it is hard to customize <code>TextFieldStyle</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MaterialTextField</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> placeholder: <span class="type">String</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> isFocus: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading, spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">BorderlessTextField</span>(placeholder: placeholder, text: $text, isFocus: $isFocus)</span><br><span class="line">                .frame(maxHeight: <span class="number">40</span>)</span><br><span class="line">            <span class="type">Rectangle</span>()</span><br><span class="line">                .foregroundColor(isFocus ? <span class="type">R</span>.color.separatorFocus : <span class="type">R</span>.color.separator)</span><br><span class="line">                .frame(height: isFocus ? <span class="number">2</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FocusAwareTextField</span>: <span class="title">NSTextField</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> onFocusChange: (<span class="type">Bool</span>) -&gt; <span class="type">Void</span> = &#123; <span class="number">_</span> <span class="keyword">in</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">becomeFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textView = window?.fieldEditor(<span class="literal">true</span>, <span class="keyword">for</span>: <span class="literal">nil</span>) <span class="keyword">as</span>? <span class="type">NSTextView</span></span><br><span class="line">        textView?.insertionPointColor = <span class="type">R</span>.nsColor.action</span><br><span class="line">        onFocusChange(<span class="literal">true</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.becomeFirstResponder()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BorderlessTextField</span>: <span class="title">NSViewRepresentable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> placeholder: <span class="type">String</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> isFocus: <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="type">Coordinator</span>(<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeNSView</span><span class="params">(context: Context)</span></span> -&gt; <span class="type">NSTextField</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textField = <span class="type">FocusAwareTextField</span>()</span><br><span class="line">        textField.placeholderAttributedString = <span class="type">NSAttributedString</span>(</span><br><span class="line">            string: placeholder,</span><br><span class="line">            attributes: [</span><br><span class="line">                <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">R</span>.nsColor.placeholder</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">        textField.isBordered = <span class="literal">false</span></span><br><span class="line">        textField.delegate = context.coordinator</span><br><span class="line">        textField.backgroundColor = <span class="type">NSColor</span>.clear</span><br><span class="line">        textField.textColor = <span class="type">R</span>.nsColor.text</span><br><span class="line">        textField.font = <span class="type">R</span>.font.text</span><br><span class="line">        textField.focusRingType = .<span class="keyword">none</span></span><br><span class="line">        textField.onFocusChange = &#123; isFocus <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.isFocus = isFocus</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> textField</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateNSView</span><span class="params">(<span class="number">_</span> nsView: NSTextField, context: Context)</span></span> &#123;</span><br><span class="line">        nsView.stringValue = text</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">NSTextFieldDelegate</span> </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> parent: <span class="type">BorderlessTextField</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">init</span>(<span class="number">_</span> textField: <span class="type">BorderlessTextField</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.parent = textField</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">controlTextDidEndEditing</span><span class="params">(<span class="number">_</span> obj: Notification)</span></span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.parent.isFocus = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">controlTextDidChange</span><span class="params">(<span class="number">_</span> obj: Notification)</span></span> &#123;</span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> textField = obj.object <span class="keyword">as</span>? <span class="type">NSTextField</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">            <span class="keyword">self</span>.parent.text = textField.stringValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-observe-focus-event-of-NSTextField-in-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-observe-focus-event-of-NSTextField-in-macOS/">How to observe focus event of NSTextField in macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-observe-focus-event-of-NSTextField-in-macOS/" class="article-date">
	  <time datetime="2020-01-29T19:29:04.000Z" itemprop="datePublished">January 29, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/589" target="_blank" rel="noopener">#589</a></strong></p>
<h2 id="becomeFirstResponder"><a href="#becomeFirstResponder" class="headerlink" title="becomeFirstResponder"></a>becomeFirstResponder</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FocusAwareTextField</span>: <span class="title">NSTextField</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> onFocusChange: (<span class="type">Bool</span>) -&gt; <span class="type">Void</span> = &#123; <span class="number">_</span> <span class="keyword">in</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">becomeFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textView = window?.fieldEditor(<span class="literal">true</span>, <span class="keyword">for</span>: <span class="literal">nil</span>) <span class="keyword">as</span>? <span class="type">NSTextView</span></span><br><span class="line">        textView?.insertionPointColor = <span class="type">R</span>.nsColor.action</span><br><span class="line">        onFocusChange(<span class="literal">true</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.becomeFirstResponder()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">textField.delegate <span class="comment">// NSTextFieldDelegate</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">controlTextDidEndEditing</span><span class="params">(<span class="number">_</span> obj: Notification)</span></span> &#123;</span><br><span class="line">    onFocusChange(<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="NSTextField-and-NSText"><a href="#NSTextField-and-NSText" class="headerlink" title="NSTextField and NSText"></a>NSTextField and NSText</h2><p><a href="https://stackoverflow.com/questions/25692122/how-to-detect-when-nstextfield-has-the-focus-or-is-its-content-selected-cocoa" target="_blank" rel="noopener">https://stackoverflow.com/questions/25692122/how-to-detect-when-nstextfield-has-the-focus-or-is-its-content-selected-cocoa</a></p>
<blockquote>
<p>When you clicked on search field, search field become first responder once, but NSText will be prepared sometime somewhere later, and the focus will be moved to the NSText.</p>
</blockquote>
<blockquote>
<p>I found out that when NSText is prepared, it is set to self.currentEditor() . The problem is that when becomeFirstResponder()â€™s call, self.currentEditor() hasnâ€™t set yet. So becomeFirstResponder() is not the method to detect itâ€™s focus.</p>
</blockquote>
<blockquote>
<p>On the other hand, when focus is moved to NSText, text fieldâ€™s resignFirstResponder() is called, and you know what? self.currentEditor() has set. So, this is the moment to tell itâ€™s delegate that that text field got focused</p>
</blockquote>
<h2 id="Use-NSTextView"><a href="#Use-NSTextView" class="headerlink" title="Use NSTextView"></a>Use NSTextView</h2><p>Any time you want to customize NSTextField, use NSTextView instead</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NSTextViewDelegate</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">textDidBeginEditing</span><span class="params">(<span class="number">_</span> notification: Notification)</span></span> &#123;</span><br><span class="line">    parent.isFocus = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">textDidEndEditing</span><span class="params">(<span class="number">_</span> notification: Notification)</span></span> &#123;</span><br><span class="line">    parent.isFocus = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-change-caret-color-of-NSTextField-in-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-change-caret-color-of-NSTextField-in-macOS/">How to change caret color of NSTextField in macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-change-caret-color-of-NSTextField-in-macOS/" class="article-date">
	  <time datetime="2020-01-29T19:08:51.000Z" itemprop="datePublished">January 29, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/588" target="_blank" rel="noopener">#588</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FocusAwareTextField</span>: <span class="title">NSTextField</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> onFocus: () -&gt; <span class="type">Void</span> = &#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> onUnfocus: () -&gt; <span class="type">Void</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">becomeFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        onFocus()</span><br><span class="line">        <span class="keyword">let</span> textView = window?.fieldEditor(<span class="literal">true</span>, <span class="keyword">for</span>: <span class="literal">nil</span>) <span class="keyword">as</span>? <span class="type">NSTextView</span></span><br><span class="line">        textView?.insertionPointColor = <span class="type">R</span>.nsColor.action</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.becomeFirstResponder()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">resignFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        onUnfocus()</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.resignFirstResponder()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-TextView-in-SwiftUI-for-macoS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-TextView-in-SwiftUI-for-macoS/">How to make TextView in SwiftUI for macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-TextView-in-SwiftUI-for-macoS/" class="article-date">
	  <time datetime="2020-01-29T04:51:01.000Z" itemprop="datePublished">January 29, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/587" target="_blank" rel="noopener">#587</a></strong></p>
<h2 id="Use-xib"><a href="#Use-xib" class="headerlink" title="Use xib"></a>Use xib</h2><p>Create a xib called <code>ScrollableTextView</code>, and drag just <code>Scrollable text view</code> as top object</p>
<img width="1160" alt="Screenshot 2020-01-29 at 06 49 55" src="https://user-images.githubusercontent.com/2284279/73331286-98255380-4263-11ea-9d63-acdfd8c5e11b.png">

<p>Connect just the <code>textView</code> property</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScrollableTextView</span>: <span class="title">NSScrollView</span> </span>&#123;</span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">var</span> textView: <span class="type">NSTextView!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Conform-to-NSViewRepresentable"><a href="#Conform-to-NSViewRepresentable" class="headerlink" title="Conform to NSViewRepresentable"></a>Conform to NSViewRepresentable</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TextView</span>: <span class="title">NSViewRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="type">Coordinator</span>(<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeNSView</span><span class="params">(context: Context)</span></span> -&gt; <span class="type">ScrollableTextView</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> views: <span class="type">NSArray?</span></span><br><span class="line">        <span class="type">Bundle</span>.main.loadNibNamed(<span class="string">"ScrollableTextView"</span>, owner: <span class="literal">nil</span>, topLevelObjects: &amp;views)</span><br><span class="line">        <span class="keyword">let</span> scrollableTextView = views!.compactMap(&#123; $<span class="number">0</span> <span class="keyword">as</span>? <span class="type">ScrollableTextView</span> &#125;).first!</span><br><span class="line">        scrollableTextView.textView.delegate = context.coordinator</span><br><span class="line">        <span class="keyword">return</span> scrollableTextView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateNSView</span><span class="params">(<span class="number">_</span> nsView: ScrollableTextView, context: Context)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> nsView.textView.string != text <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        nsView.textView.string = text</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">NSTextViewDelegate</span> </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> parent: <span class="type">TextView</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">init</span>(<span class="number">_</span> textView: <span class="type">TextView</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.parent = textView</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">textDidChange</span><span class="params">(<span class="number">_</span> notification: Notification)</span></span> &#123;</span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> textView = notification.object <span class="keyword">as</span>? <span class="type">NSTextView</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">            <span class="keyword">self</span>.parent.text = textView.string</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>There seems to be a bug that if we have open and close curly braces, any character typed into NSTextView will move the cursor to the end. This is easily fixed with a check in <code>updateNSView</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-custom-font-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-custom-font-in-SwiftUI/">How to use custom font in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-custom-font-in-SwiftUI/" class="article-date">
	  <time datetime="2020-01-28T22:49:03.000Z" itemprop="datePublished">January 28, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/586" target="_blank" rel="noopener">#586</a></strong></p>
<h2 id="In-macOS"><a href="#In-macOS" class="headerlink" title="In macOS"></a>In macOS</h2><p>Add fonts to target. In <code>Info.plist</code>, just need to specify font locations, most of the time they are at Resources folder</p>
<blockquote>
<p>ATSApplicationFontsPath (String - macOS) identifies the location of a font file or directory of fonts in the bundleâ€™s Resources directory. If present, macOS activates the fonts at the specified path for use by the bundled app. The fonts are activated only for the bundled app and not for the system as a whole. The path itself should be specified as a relative directory of the bundleâ€™s Resources directory. For example, if a directory of fonts was at the path /Applications/MyApp.app/Contents/Resources/Stuff/MyFonts/, you should specify the string Stuff/MyFonts/ for the value of this key.</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>ATSApplicationFontsPath<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Define font weight as enums, and base on <code>ContentSizeCategory</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">OpenSans</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> bold = <span class="string">"OpenSans-Bold"</span></span><br><span class="line">    <span class="keyword">case</span> semiBold = <span class="string">"OpenSans-SemiBold"</span></span><br><span class="line">    <span class="keyword">case</span> extraBold = <span class="string">"OpenSans-ExtraBold"</span></span><br><span class="line">    <span class="keyword">case</span> light = <span class="string">"OpenSans-Light"</span></span><br><span class="line">    <span class="keyword">case</span> regular = <span class="string">"OpenSans-Regular"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">FiraCode</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> bold = <span class="string">"FiraCode-Bold"</span></span><br><span class="line">    <span class="keyword">case</span> medium = <span class="string">"FiraCode-Medium"</span></span><br><span class="line">    <span class="keyword">case</span> light = <span class="string">"FiraCode-Light"</span></span><br><span class="line">    <span class="keyword">case</span> regular = <span class="string">"FiraCode-Regular"</span></span><br><span class="line">    <span class="keyword">case</span> retina = <span class="string">"FiraCode-Retina"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ContentSizeCategory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> size: <span class="type">CGFloat</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .small:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">14</span></span><br><span class="line">        <span class="keyword">case</span> .medium:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">16</span></span><br><span class="line">        <span class="keyword">case</span> .large:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">14</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">customFont</span><span class="params">(<span class="number">_</span> font: OpenSans, category: ContentSizeCategory)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.customFont(font.rawValue, category: category)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">customFont</span><span class="params">(<span class="number">_</span> name: String, category: ContentSizeCategory)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.font(.custom(name, size: category.size))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then we can specify font weight, thanks to function overloading</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">"Welcome"</span>)</span><br><span class="line">    .customFont(<span class="type">OpenSans</span>.bold, category: .large)</span><br></pre></td></tr></table></figure>

<h2 id="In-iOS"><a href="#In-iOS" class="headerlink" title="In iOS"></a>In iOS</h2><p>Observe <code>@Environment(\.sizeCategory) var sizeCategory</code> in ViewModifier</p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-use-dynamic-type-with-a-custom-font" target="_blank" rel="noopener">https://www.hackingwithswift.com/quick-start/swiftui/how-to-use-dynamic-type-with-a-custom-font</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Firebase-Crashlytics-in-macOS-app"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Firebase-Crashlytics-in-macOS-app/">How to use Firebase Crashlytics in macOS app</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Firebase-Crashlytics-in-macOS-app/" class="article-date">
	  <time datetime="2020-01-28T22:13:27.000Z" itemprop="datePublished">January 28, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/585" target="_blank" rel="noopener">#585</a></strong></p>
<h2 id="New-Firebase-Crashlytics"><a href="#New-Firebase-Crashlytics" class="headerlink" title="New Firebase Crashlytics"></a>New Firebase Crashlytics</h2><p>Follow the new Firebase Crashlytics guide <a href="https://firebase.google.com/docs/crashlytics/get-started-new-sdk?authuser=0" target="_blank" rel="noopener">Get started with Firebase Crashlytics using the Firebase Crashlytics SDK</a></p>
<h2 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h2><p>Specify <code>FirebaseCore</code> for community managed macOS version of Firebase</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:osx</span>, <span class="string">'10.13'</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'MyMacApp'</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># Comment the next line if you don't want to use dynamic frameworks</span></span><br><span class="line">  use_frameworks!</span><br><span class="line">  </span><br><span class="line">  pod <span class="string">'FirebaseCore'</span></span><br><span class="line">  pod <span class="string">'Firebase/Crashlytics'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Signing-and-capabilities"><a href="#Signing-and-capabilities" class="headerlink" title="Signing and capabilities"></a>Signing and capabilities</h2><p>Under Hardware runtime, check <code>Disable  library validation</code><br>Under App sandbox, enable Outgoing connections (Client)</p>
<h2 id="Run-script"><a href="#Run-script" class="headerlink" title="Run script"></a>Run script</h2><p>Add a new run script build phrase to the last</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;$&#123;PODS_ROOT&#125;/FirebaseCrashlytics/run&quot;</span><br></pre></td></tr></table></figure>

<p>In that  build phase, under Input Files, specify dsym and info plist file for dsym to be recognized</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(SRCROOT)/$(BUILT_PRODUCTS_DIR)/$(INFOPLIST_PATH)</span><br><span class="line">$&#123;DWARF_DSYM_FOLDER_PATH&#125;/$&#123;DWARF_DSYM_FILE_NAME&#125;/Contents/Resources/DWARF/$&#123;TARGET_NAME&#125;</span><br></pre></td></tr></table></figure>

<h2 id="AppDelegate"><a href="#AppDelegate" class="headerlink" title="AppDelegate"></a>AppDelegate</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> FirebaseCore</span><br><span class="line"><span class="keyword">import</span> FirebaseCrashlytics</span><br><span class="line"></span><br><span class="line"><span class="type">FirebaseApp</span>.configure()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firebase/">firebase</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Xcode-tips"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Xcode-tips/">Xcode tips</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Xcode-tips/" class="article-date">
	  <time datetime="2020-01-26T19:59:09.000Z" itemprop="datePublished">January 26, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/584" target="_blank" rel="noopener">#584</a></strong></p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://dasdom.github.io/a-breakpoint-i-cannot-live-without/" target="_blank" rel="noopener">https://dasdom.github.io/a-breakpoint-i-cannot-live-without/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcode/">xcode</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-test-drag-and-drop-in-UITests"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-test-drag-and-drop-in-UITests/">How to test drag and drop in UITests</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-test-drag-and-drop-in-UITests/" class="article-date">
	  <time datetime="2020-01-23T13:01:07.000Z" itemprop="datePublished">January 23, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/583" target="_blank" rel="noopener">#583</a></strong></p>
<p>In UITests, we can use <code>press</code> from <code>XCUIElement</code> to test drag and drop</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fromCat = app.buttons[<span class="string">"cat1"</span>].firstMatch</span><br><span class="line"><span class="keyword">let</span> toCat = app.buttons[<span class="string">"cat2"</span>]</span><br><span class="line"><span class="keyword">let</span> fromCoordinate = fromCat.coordinate(withNormalizedOffset: <span class="type">CGVector</span>(dx: <span class="number">0</span>, dy: <span class="number">0</span>))</span><br><span class="line"><span class="keyword">let</span> toCoordinate = toCat.coordinate(withNormalizedOffset: <span class="type">CGVector</span>(dx: <span class="number">0</span>, dy: -<span class="number">0.5</span>))</span><br><span class="line">fromCoordinate.press(forDuration: <span class="number">1</span>, thenDragTo: toCoordinate)</span><br></pre></td></tr></table></figure>

<p>and then take screenshot</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> screenshot = <span class="type">XCUIScreen</span>.main.screenshot()</span><br><span class="line"><span class="keyword">let</span> attachment = <span class="type">XCTAttachment</span>(screenshot: screenshot)</span><br><span class="line">attachment.lifetime = .keepAlways</span><br><span class="line">attachment.name = name</span><br><span class="line">add(attachment)</span><br></pre></td></tr></table></figure>

<p>Screenshot capturing happens after the action, so it may be too late. One way is to inject launch arguments, like <code>app.launchArguments.append(&quot;--dragdrop&quot;)</code> to alter some code in the app.</p>
<p>We can also swizzle gesture recognizer to alter behavior</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UILongPressGestureRecognizer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">var</span> uiTests_state: <span class="type">UIGestureRecognizer</span>.<span class="type">State</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> state = <span class="keyword">self</span>.uiTests_state</span><br><span class="line">        <span class="keyword">if</span> state == .ended &#123;</span><br><span class="line">            <span class="keyword">return</span> .changed</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> originalSelector = #selector(getter: <span class="type">UILongPressGestureRecognizer</span>.state)</span><br><span class="line"><span class="keyword">let</span> swizzledSelector = #selector(getter: <span class="type">UILongPressGestureRecognizer</span>.uiTests_state)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> originalMethod = class_getInstanceMethod(<span class="type">UILongPressGestureRecognizer</span>.<span class="keyword">self</span>, originalSelector)!</span><br><span class="line"><span class="keyword">let</span> swizzledMethod = class_getInstanceMethod(<span class="type">UILongPressGestureRecognizer</span>.<span class="keyword">self</span>, swizzledSelector)!</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> didAddMethod = class_addMethod(<span class="type">UILongPressGestureRecognizer</span>.<span class="keyword">self</span>, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> didAddMethod &#123;</span><br><span class="line">    class_replaceMethod(<span class="type">UILongPressGestureRecognizer</span>.<span class="keyword">self</span>, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod))</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    method_exchangeImplementations(originalMethod, swizzledMethod)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/testing/">testing</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-set-corner-radius-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-set-corner-radius-in-iOS/">How to set corner radius in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-set-corner-radius-in-iOS/" class="article-date">
	  <time datetime="2020-01-22T11:06:45.000Z" itemprop="datePublished">January 22, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/582" target="_blank" rel="noopener">#582</a></strong></p>
<h2 id="Use-View-Debugging"><a href="#Use-View-Debugging" class="headerlink" title="Use View Debugging"></a>Use View Debugging</h2><p>Run on device, <code>Xcode -&gt; Debug -&gt; View debugging -&gt; Rendering -&gt; Color blended layer</code><br>On <code>Simulator -&gt; Debug -&gt; Color Blended Layer</code></p>
<h2 id="Corner-radius"><a href="#Corner-radius" class="headerlink" title="Corner radius"></a>Corner radius</h2><ul>
<li><a href="https://twitter.com/timoliverau/status/1135999854176395264" target="_blank" rel="noopener">https://twitter.com/timoliverau/status/1135999854176395264</a></li>
</ul>
<blockquote>
<p>Okay. Talked to a Core Animation engineer again:</p>
</blockquote>
<blockquote>
<ul>
<li>cornerRadius was deliberately improved in Metal so it could be used everywhere.</li>
<li>Using a bitmap is WAY heavier in terms of memory and performance.</li>
<li>CALayer maskLayer is still heavy.</li>
</ul>
</blockquote>
<p><a href="https://developer.apple.com/documentation/quartzcore/calayer/1410818-cornerradius" target="_blank" rel="noopener">https://developer.apple.com/documentation/quartzcore/calayer/1410818-cornerradius</a></p>
<blockquote>
<p>Setting the radius to a value greater than 0.0 causes the layer to begin drawing rounded corners on its background. By default, the corner radius does not apply to the image in the layerâ€™s contents property; it applies only to the background color and border of the layer. However, setting the masksToBounds property to true causes the content to be clipped to the rounded corners.</p>
</blockquote>
<p><a href="https://developer.apple.com/documentation/quartzcore/calayer/1410896-maskstobounds" target="_blank" rel="noopener">https://developer.apple.com/documentation/quartzcore/calayer/1410896-maskstobounds</a></p>
<blockquote>
<p>When the value of this property is true, Core Animation creates an implicit clipping mask that matches the bounds of the layer and includes any corner radius effects. If a value for the mask property is also specified, the two masks are multiplied to get the final mask value.</p>
</blockquote>
<h2 id="Mask-layer"><a href="#Mask-layer" class="headerlink" title="Mask layer"></a>Mask layer</h2><p><code>layer.cornerRadius</code>, with or without <code>layer.maskedCorners</code> causes blending<br>Use mask layer instead of <code>layer.cornerRadius</code> to avoid blending, but mask causes offscreen rendering</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mask = <span class="type">CAShapeLayer</span>()</span><br><span class="line"><span class="keyword">let</span> path = <span class="type">UIBezierPath</span>(</span><br><span class="line">    roundedRect: bounds,</span><br><span class="line">    byRoundingCorners: [.topLeft, .topRight, .bottomLeft, .bottomRight],</span><br><span class="line">    cornerRadii: <span class="type">CGSize</span>(width: <span class="number">20</span>, height: <span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line">mask.path = path.cgPath</span><br><span class="line">layer.mask = mask</span><br></pre></td></tr></table></figure>

<h2 id="Offscreen-rendering"><a href="#Offscreen-rendering" class="headerlink" title="Offscreen rendering"></a>Offscreen rendering</h2><ul>
<li><a href="https://www.objc.io/issues/3-views/moving-pixels-onto-the-screen/" target="_blank" rel="noopener">https://www.objc.io/issues/3-views/moving-pixels-onto-the-screen/</a></li>
</ul>
<blockquote>
<p>Instrumentsâ€™ Core Animation Tool has an option called Color Offscreen-Rendered Yellow that will color regions yellow that have been rendered with an offscreen buffer (this option is also available in the Simulatorâ€™s Debug menu). Be sure to also check Color Hits Green and Misses Red. Green is for whenever an offscreen buffer is reused, while red is for when it had to be re-created.</p>
</blockquote>
<ul>
<li><a href="https://thoughtbot.com/blog/designing-for-ios-graphics-performance" target="_blank" rel="noopener">https://thoughtbot.com/blog/designing-for-ios-graphics-performance</a></li>
</ul>
<blockquote>
<p>Offscreen drawing on the other hand refers to the process of generating bitmap graphics in the background using the CPU before handing them off to the GPU for onscreen rendering. In iOS, offscreen drawing occurs automatically in any of the following cases:</p>
</blockquote>
<blockquote>
<p>Core Graphics (any class prefixed with CG<em>)<br>The drawRect() method, even with an empty implementation.<br>CALayers with a shouldRasterize property set to YES.<br>CALayers using masks (setMasksToBounds) and dynamic shadows (setShadow</em>).<br>Any text displayed on screen, including Core Text.<br>Group opacity (UIViewGroupOpacity).</p>
</blockquote>
<h2 id="Instruments"><a href="#Instruments" class="headerlink" title="Instruments"></a>Instruments</h2><ul>
<li>Colors <a href="https://felixha.wordpress.com/2014/04/28/graphics-performance-tuning/" target="_blank" rel="noopener">https://felixha.wordpress.com/2014/04/28/graphics-performance-tuning/</a></li>
</ul>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://texturegroup.org/docs/corner-rounding.html" target="_blank" rel="noopener">Corner Rounding</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@abstract Sets the corner rounding method to use on the ASDisplayNode.</span><br><span class="line">There are three types of corner rounding provided by Texture: CALayer, Precomposited, and Clipping.</span><br><span class="line"></span><br><span class="line">- ASCornerRoundingTypeDefaultSlowCALayer: uses CALayer&apos;s inefficient .cornerRadius property. Use</span><br><span class="line">this type of corner in situations in which there is both movement through and movement underneath</span><br><span class="line">the corner (very rare). This uses only .cornerRadius.</span><br><span class="line"></span><br><span class="line">- ASCornerRoundingTypePrecomposited: corners are drawn using bezier paths to clip the content in a</span><br><span class="line">CGContext / UIGraphicsContext. This requires .backgroundColor and .cornerRadius to be set. Use opaque</span><br><span class="line">background colors when possible for optimal efficiency, but transparent colors are supported and much</span><br><span class="line">more efficient than CALayer. The only limitation of this approach is that it cannot clip children, and</span><br><span class="line">thus works best for ASImageNodes or containers showing a background around their children.</span><br><span class="line"></span><br><span class="line">- ASCornerRoundingTypeClipping: overlays 4 separate opaque corners on top of the content that needs</span><br><span class="line">corner rounding. Requires .backgroundColor and .cornerRadius to be set. Use clip corners in situations</span><br><span class="line">in which is movement through the corner, with an opaque background (no movement underneath the corner).</span><br><span class="line">Clipped corners are ideal for animating / resizing views, and still outperform CALayer.</span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://www.hackingwithswift.com/articles/79/how-to-find-and-fix-slow-drawing-using-instruments" target="_blank" rel="noopener">https://www.hackingwithswift.com/articles/79/how-to-find-and-fix-slow-drawing-using-instruments</a></li>
<li><a href="https://stackoverflow.com/questions/35685726/uibezierpath-doesnt-work-in-topright-corner-and-bottomright-corner/43808103" target="_blank" rel="noopener">https://stackoverflow.com/questions/35685726/uibezierpath-doesnt-work-in-topright-corner-and-bottomright-corner/43808103</a></li>
<li><a href="https://stackoverflow.com/questions/6731545/when-does-a-view-or-layer-require-offscreen-rendering" target="_blank" rel="noopener">https://stackoverflow.com/questions/6731545/when-does-a-view-or-layer-require-offscreen-rendering</a></li>
</ul>
<blockquote>
<p>Generally, on iOS, pixel effects and Quartz / Core Graphics drawing are not hardware accelerated, and most other things are.<br>The following things are not hardware accelerated, which means that they need to be done in software (offscreen):<br>Anything done in a drawRect. If your view has a drawRect, even an empty one, the drawing is not done in hardware, and there is a performance penalty.<br>Any layer with the shouldRasterize property set to YES.<br>Any layer with a mask or drop shadow.<br>Text (any kind, including UILabels, CATextLayers, Core Text, etc).<br>Any drawing you do yourself (either onscreen or offscreen) using a CGContext.</p>
</blockquote>
<ul>
<li>Make overlay view <a href="https://stackoverflow.com/questions/13979935/setting-corner-radius-on-a-cell-kills-uicollectionviews-performance" target="_blank" rel="noopener">https://stackoverflow.com/questions/13979935/setting-corner-radius-on-a-cell-kills-uicollectionviews-performance</a></li>
<li><a href="http://www.lukeparham.com/blog/2018/3/6/friends-dont-let-friends-render-offscreen" target="_blank" rel="noopener">http://www.lukeparham.com/blog/2018/3/6/friends-dont-let-friends-render-offscreen</a></li>
</ul>
<blockquote>
<p>For example, writing your own draw method with Core Graphics means your rendering will technically be done in software (offscreen) as opposed to being hardware accelerated like it is when you use a normal CALayer. This is why manually rendering a UIImage with a CGContext is slower than just assigning the image to a UIImageView.</p>
</blockquote>
<ul>
<li><a href="https://github.com/seedante/OptimizationForOffscreenRender" target="_blank" rel="noopener">https://github.com/seedante/OptimizationForOffscreenRender</a></li>
</ul>
<blockquote>
<p>if layerâ€™s contents is nil or this contents has a transparent background, you just need to set cornerRadius. For UILabel, UITextView and UIButton, you can just set layerâ€™s backgroundColor and cornerRadius to get a rounded corner. Note: UILabelâ€™s backgroundColor is not its layerâ€™s backgroundColor.</p>
</blockquote>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-deal-with-Swift-slow-compile-time"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-deal-with-Swift-slow-compile-time/">How to deal with Swift slow compile time</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-deal-with-Swift-slow-compile-time/" class="article-date">
	  <time datetime="2020-01-21T08:18:21.000Z" itemprop="datePublished">January 21, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/581" target="_blank" rel="noopener">#581</a></strong></p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://engineering.circle.com/swift-compiler-performance-tips-and-tricks-e86a53a5b42a" target="_blank" rel="noopener">https://engineering.circle.com/swift-compiler-performance-tips-and-tricks-e86a53a5b42a</a></li>
<li><a href="https://swiftrocks.com/reducing-ios-build-times-by-using-interface-targets.html" target="_blank" rel="noopener">https://swiftrocks.com/reducing-ios-build-times-by-using-interface-targets.html</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-work-with-SceneDelegate-in-iOS-12"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-work-with-SceneDelegate-in-iOS-12/">How to work with SceneDelegate in iOS 12</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-work-with-SceneDelegate-in-iOS-12/" class="article-date">
	  <time datetime="2020-01-20T13:21:29.000Z" itemprop="datePublished">January 20, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/580" target="_blank" rel="noopener">#580</a></strong></p>
<h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><h3 id="open-url"><a href="#open-url" class="headerlink" title="open url"></a>open url</h3><ul>
<li><a href="https://stackoverflow.com/questions/58624786/method-applicationopenurloptions-is-not-called" target="_blank" rel="noopener">https://stackoverflow.com/questions/58624786/method-applicationopenurloptions-is-not-called</a></li>
</ul>
<blockquote>
<p>Implement scene(_:openURLContexts:) in your scene delegate.</p>
</blockquote>
<blockquote>
<p>If the URL launches your app, you will get scene(_:willConnectTo:options:) instead and itâ€™s in the options.</p>
</blockquote>
<h3 id="life-cycle"><a href="#life-cycle" class="headerlink" title="life cycle"></a>life cycle</h3><ul>
<li><a href="https://stackoverflow.com/questions/56508764/app-delegate-methods-arent-being-called-in-ios-13" target="_blank" rel="noopener">https://stackoverflow.com/questions/56508764/app-delegate-methods-arent-being-called-in-ios-13</a></li>
</ul>
<blockquote>
<p>Hereâ€™s how it works: If you have an â€œApplication Scene Manifestâ€ in your Info.plist and your app delegate has a configurationForConnectingSceneSession method, the UIApplication wonâ€™t send background and foreground lifecycle messages to your app delegate. That means the code in these methods wonâ€™t run:</p>
</blockquote>
<blockquote>
<p>applicationDidBecomeActive<br>applicationWillResignActive<br>applicationDidEnterBackground<br>applicationWillEnterForeground<br>The app delegate will still receive the willFinishLaunchingWithOptions: and didFinishLaunchingWithOptions: method calls so any code in those methods will work as before.</p>
</blockquote>
<h3 id="UIApplication-notifications"><a href="#UIApplication-notifications" class="headerlink" title="UIApplication notifications"></a>UIApplication notifications</h3><p>Notifications still trigger in iOS 13 if adopting SceneDelegate</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIApplication</span>.didBecomeActiveNotification</span><br><span class="line"><span class="type">UIApplication</span>.willResignActiveNotification</span><br></pre></td></tr></table></figure>

<p><a href="https://developer.apple.com/documentation/uikit/app_and_environment/scenes/preparing_your_ui_to_run_in_the_foreground" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/app_and_environment/scenes/preparing_your_ui_to_run_in_the_foreground</a></p>
<blockquote>
<p>Use foreground transitions to prepare your appâ€™s UI to appear onscreen. An appâ€™s transition to the foreground is usually in response to a user action. For example, when the user taps the appâ€™s icon, the system launches the app and brings it to the foreground. Use a foreground transition to update your appâ€™s UI, acquire resources, and start the services you need to handle user requests.</p>
</blockquote>
<blockquote>
<p>All state transitions result in UIKit sending notifications to the appropriate delegate object:</p>
</blockquote>
<blockquote>
<p>In iOS 13 and laterâ€”A UISceneDelegate object.<br>In iOS 12 and earlierâ€”The UIApplicationDelegate object.</p>
</blockquote>
<blockquote>
<p>You can support both types of delegate objects, but UIKit always uses scene delegate objects when they are available. UIKit notifies only the scene delegate associated with the specific scene that is entering the foreground. For information about how to configure scene support, see Specifying the Scenes Your App Supports.</p>
</blockquote>
<h3 id="keyWindow"><a href="#keyWindow" class="headerlink" title="keyWindow"></a>keyWindow</h3><p>Show most recent active<code>UIWindow</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIApplication</span>.shared.keyWindow</span><br></pre></td></tr></table></figure>

<blockquote>
<p>This property holds the UIWindow object in the windows array that is most recently sent the makeKeyAndVisible() message.</p>
</blockquote>
<h2 id="AppDelegate-vs-SceneDelegate"><a href="#AppDelegate-vs-SceneDelegate" class="headerlink" title="AppDelegate vs SceneDelegate"></a>AppDelegate vs SceneDelegate</h2><h3 id="Get-sceneDelegate-from-AppDelegate"><a href="#Get-sceneDelegate-from-AppDelegate" class="headerlink" title="Get sceneDelegate from AppDelegate"></a>Get sceneDelegate from AppDelegate</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIApplication</span>.shared.openSessions.first?.scene?.delegate</span><br></pre></td></tr></table></figure>

<h3 id="order"><a href="#order" class="headerlink" title="order"></a>order</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SceneDelegate</span>.sceneDidBecomeActive</span><br><span class="line"><span class="type">UIApplication</span>.didBecomeActiveNotification</span><br><span class="line"><span class="type">SceneDelegate</span>.sceneWillResignActive</span><br><span class="line"><span class="type">UIApplication</span>.willResignActiveNotification</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.donnywals.com/add-ios-12-support-to-a-new-xcode-11-project/" target="_blank" rel="noopener">https://www.donnywals.com/add-ios-12-support-to-a-new-xcode-11-project/</a></li>
<li><a href="https://www.donnywals.com/adding-support-for-multiple-windows-to-your-ipados-app/" target="_blank" rel="noopener">https://www.donnywals.com/adding-support-for-multiple-windows-to-your-ipados-app/</a></li>
<li><a href="https://www.donnywals.com/understanding-the-ios-13-scene-delegate/" target="_blank" rel="noopener">https://www.donnywals.com/understanding-the-ios-13-scene-delegate/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-handle-radio-group-for-NSButton"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-handle-radio-group-for-NSButton/">How to handle radio group for NSButton</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-handle-radio-group-for-NSButton/" class="article-date">
	  <time datetime="2020-01-17T05:22:36.000Z" itemprop="datePublished">January 17, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/579" target="_blank" rel="noopener">#579</a></strong></p>
<p>Use same action, or we can roll our own implementation</p>
<blockquote>
<p>An NSButton configured as a radio button (with the -buttonType set to NSRadioButton), will now operate in a radio button group for applications linked on 10.8 and later. To have the button work in a radio group, use the same -action for each NSButton instance, and have the same superview for each button. When these conditions are met, checking one button (by changing the -state to 1), will uncheck all other buttons (by setting their -state to 0).</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Omnia</span><br><span class="line"></span><br><span class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">onModeButtonTouch</span><span class="params">(<span class="number">_</span> sender: NSRadioButton)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> button <span class="keyword">in</span> [mode1Button, mode2Button] &#123;</span><br><span class="line">        button?.isOn = button === sender</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-specify-locale-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-specify-locale-in-Swift/">How to specify locale in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-specify-locale-in-Swift/" class="article-date">
	  <time datetime="2020-01-14T13:03:41.000Z" itemprop="datePublished">January 14, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/578" target="_blank" rel="noopener">#578</a></strong></p>
<h2 id="Locale"><a href="#Locale" class="headerlink" title="Locale"></a>Locale</h2><p>Read <a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPInternational/LanguageandLocaleIDs/LanguageandLocaleIDs.html" target="_blank" rel="noopener">Language and Locale IDs</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zh-Hans_HK</span><br><span class="line">[language designator]-[script designator]_[region designator]</span><br></pre></td></tr></table></figure>

<h3 id="Language-IDs"><a href="#Language-IDs" class="headerlink" title="Language IDs"></a>Language IDs</h3><blockquote>
<p>A language ID identifies a language used in many regions, a dialect used in a specific region, or a script used in multiple regions. To specify a language used in many regions, use a language designator by itself. To specify a specific dialect, use a hyphen to combine a language designator with a region designator. To specify a script, combine a language designator with a script designator. For example, to specify common English, use the en language designator as the language ID. To specify the English language as it is used in the United Kingdom, use en-GB as the language ID.</p>
</blockquote>
<h3 id="Locale-IDs"><a href="#Locale-IDs" class="headerlink" title="Locale IDs"></a>Locale IDs</h3><blockquote>
<p>A locale ID identifies a specific region and its cultural conventionsâ€”such as the formatting of dates, times, and numbers. To specify a locale, use an underscore character to combine a language ID with a region designator, as shown in Table B-5. For example, the locale ID for English-language speakers in the United Kingdom is en_GB, while the locale for English-speaking residents of the United States is en_US.</p>
</blockquote>
<p>Example</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let formatter = DateFormatter()</span><br><span class="line">formatter.dateStyle = .medium</span><br><span class="line">formatter.timeStyle = .short</span><br><span class="line">formatter.locale = Locale.current</span><br><span class="line"></span><br><span class="line">10. jan. 2018, 16:50 // nb_NO</span><br><span class="line">10. jan. 2018, 16:50 // nb_US iOS 12</span><br><span class="line">10. jan. 2018, 4:50 pm // nb_US iOS 13</span><br><span class="line">10 Jan 2018 at 16:50 // en_NO</span><br><span class="line">Jan 10, 2018 at 4:50 PM // en_US</span><br></pre></td></tr></table></figure>

<h2 id="Date-format"><a href="#Date-format" class="headerlink" title="Date format"></a>Date format</h2><p>Use <a href="https://developer.apple.com/documentation/foundation/dateformatter/style/short" target="_blank" rel="noopener">DateFormatter Style</a></p>
<p>Example <code>short</code></p>
<blockquote>
<p>Specifies a short style, typically numeric only, such as â€œ11/23/37â€ or â€œ3:30 PMâ€.</p>
</blockquote>
<p>Example <code>medium</code></p>
<blockquote>
<p>Specifies a medium style, typically with abbreviated text, such as â€œNov 23, 1937â€ or â€œ3:30:32 PMâ€.</p>
</blockquote>
<h3 id="From-template"><a href="#From-template" class="headerlink" title="From template"></a>From template</h3><ul>
<li><a href="https://stackoverflow.com/questions/5135482/how-to-determine-if-locales-date-format-is-month-day-or-day-month" target="_blank" rel="noopener">https://stackoverflow.com/questions/5135482/how-to-determine-if-locales-date-format-is-month-day-or-day-month</a></li>
<li><a href="https://developer.apple.com/documentation/foundation/dateformatter" target="_blank" rel="noopener">https://developer.apple.com/documentation/foundation/dateformatter</a></li>
</ul>
<blockquote>
<p>If you need to define a format that cannot be achieved using the predefined styles, you can use the setLocalizedDateFormatFromTemplate(_:) to specify a localized date format from a template.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dateFormatter = <span class="type">DateFormatter</span>()</span><br><span class="line"><span class="keyword">let</span> date = <span class="type">Date</span>(timeIntervalSinceReferenceDate: <span class="number">410220000</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// US English Locale (en_US)</span></span><br><span class="line">dateFormatter.locale = <span class="type">Locale</span>(identifier: <span class="string">"en_US"</span>)</span><br><span class="line">dateFormatter.setLocalizedDateFormatFromTemplate(<span class="string">"MMMMd"</span>) <span class="comment">// set template after setting locale</span></span><br><span class="line"><span class="built_in">print</span>(dateFormatter.string(from: date)) <span class="comment">// December 31</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// British English Locale (en_GB)</span></span><br><span class="line">dateFormatter.locale = <span class="type">Locale</span>(identifier: <span class="string">"en_GB"</span>)</span><br><span class="line">dateFormatter.setLocalizedDateFormatFromTemplate(<span class="string">"MMMMd"</span>) <span class="comment">// // set template after setting locale</span></span><br><span class="line"><span class="built_in">print</span>(dateFormatter.string(from: date)) <span class="comment">// 31 December</span></span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://nsdateformatter.com/" target="_blank" rel="noopener">https://nsdateformatter.com/</a></li>
<li><a href="https://albertodebortoli.com/2020/01/06/the-ios-internationalization-basics-i-keep-forgetting/" target="_blank" rel="noopener">https://albertodebortoli.com/2020/01/06/the-ios-internationalization-basics-i-keep-forgetting/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-workaround-URLSession-issue-in-watchOS-6.1.1"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-workaround-URLSession-issue-in-watchOS-6.1.1/">How to workaround URLSession issue in watchOS 6.1.1</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-workaround-URLSession-issue-in-watchOS-6.1.1/" class="article-date">
	  <time datetime="2020-01-13T21:08:56.000Z" itemprop="datePublished">January 13, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/577" target="_blank" rel="noopener">#577</a></strong></p>
<p><a href="https://stackoverflow.com/questions/59724731/class-avassetdownloadtask-is-implemented-in-both-cfnetwork-and-avfoundation" target="_blank" rel="noopener">https://stackoverflow.com/questions/59724731/class-avassetdownloadtask-is-implemented-in-both-cfnetwork-and-avfoundation</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">objc[45250]: Class AVAssetDownloadTask is implemented in both /Applications/Xcode.app/Contents/Developer/Platforms/WatchOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/watchOS.simruntime/Contents/Resources/RuntimeRoot/System/Library/Frameworks/CFNetwork.framework/CFNetwork (0x4ddd0ec) and /Applications/Xcode.app/Contents/Developer/Platforms/WatchOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/watchOS.simruntime/Contents/Resources/RuntimeRoot/System/Library/Frameworks/AVFoundation.framework/AVFoundation (0x16aea494). One of the two will be used. Which one is undefined.</span><br><span class="line"></span><br><span class="line">objc[45250]: Class AVAssetDownloadURLSession is implemented in both /Applications/Xcode.app/Contents/Developer/Platforms/WatchOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/watchOS.simruntime/Contents/Resources/RuntimeRoot/System/Library/Frameworks/CFNetwork.framework/CFNetwork (0x4dddd44) and /Applications/Xcode.app/Contents/Developer/Platforms/WatchOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/watchOS.simruntime/Contents/Resources/RuntimeRoot/System/Library/Frameworks/AVFoundation.framework/AVFoundation (0x16aea4bc). One of the two will be used. Which one is undefined.</span><br></pre></td></tr></table></figure>

<p>Then URLSession stops working.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-01-13 22:50:12.430920+0100 MyAppWatch WatchKit Extension[45250:2099229] Task &lt;3CECDE81-59B9-4EDE-A4ED-1BA173646037&gt;.&lt;1&gt; finished with error [-999] Error Domain=NSURLErrorDomain Code=-999 &quot;cancelled&quot; UserInfo=&#123;NSErrorFailingURLKey=https://myapp.com/def.json, NSErrorFailingURLStringKey=https://myapp.com/def.json, NSLocalizedDescription=cancelled&#125;</span><br></pre></td></tr></table></figure>

<p>The workaround is to  remove Combine based API, and use completion block.</p>
<p>Instead of <code>dataTaskPublisher</code> which hangs indefinitely, no <code>sink</code> is reported</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">URLSession</span>.shared</span><br><span class="line">.dataTaskPublisher(<span class="keyword">for</span>: url)</span><br><span class="line">.<span class="built_in">map</span>(&#123; $<span class="number">0</span>.data &#125;)</span><br><span class="line">.decode(type: <span class="type">T</span>.<span class="keyword">self</span>, decoder: <span class="type">JSONDecoder</span>())</span><br><span class="line">.eraseToAnyPublisher()</span><br><span class="line">.receive(on: <span class="type">RunLoop</span>.main)</span><br><span class="line">.sink(receiveCompletion: &#123; completionStatus <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">switch</span> completionStatus &#123;</span><br><span class="line">    <span class="keyword">case</span> .finished:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> .failure(<span class="keyword">let</span> error):</span><br><span class="line">        completion(.failure(error))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, receiveValue: &#123; value <span class="keyword">in</span></span><br><span class="line">    completion(.success(value))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>just use normal</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="type">URLSession</span>.shared.dataTask(with: url, completionHandler: &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data = data, <span class="keyword">let</span> model = <span class="keyword">try</span>? <span class="type">JSONDecoder</span>().decode(<span class="type">T</span>.<span class="keyword">self</span>, from: data) &#123;</span><br><span class="line">        completion(.success(model))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        completion(.failure(error ?? <span class="type">ServiceError</span>.noInternet))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">task.resume()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-generate-XCTest-test-methods"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-generate-XCTest-test-methods/">How to generate XCTest test methods</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-generate-XCTest-test-methods/" class="article-date">
	  <time datetime="2020-01-12T06:33:39.000Z" itemprop="datePublished">January 12, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/576" target="_blank" rel="noopener">#576</a></strong></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>See <a href="https://github.com/onmyway133/Spek" target="_blank" rel="noopener">Spek</a></p>
<h3 id="Override-testInvocations-to-specify-test-methods"><a href="#Override-testInvocations-to-specify-test-methods" class="headerlink" title="Override testInvocations to specify test methods"></a>Override testInvocations to specify test methods</h3><p><a href="https://developer.apple.com/documentation/xctest/xctestcase/1496271-testinvocations" target="_blank" rel="noopener">https://developer.apple.com/documentation/xctest/xctestcase/1496271-testinvocations</a></p>
<blockquote>
<p>Returns an array of invocations representing each test method in the test case.</p>
</blockquote>
<p>Because <code>testInvocations</code> is unavailable in Swift, we need  to use ObjC</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"include/SpekHelperTestCase.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">SpekHelperTestCase</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithInvocation: <span class="literal">nil</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">NSArray</span>&lt;<span class="built_in">NSInvocation</span> *&gt; *)testInvocations &#123;</span><br><span class="line">    <span class="built_in">NSArray</span>&lt;<span class="built_in">NSString</span> *&gt; *selectorStrings = [<span class="keyword">self</span> spekGenerateTestMethodNames];</span><br><span class="line">    <span class="built_in">NSMutableArray</span>&lt;<span class="built_in">NSInvocation</span> *&gt; *invocations = [<span class="built_in">NSMutableArray</span> arrayWithCapacity:selectorStrings.count];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *selectorString <span class="keyword">in</span> selectorStrings) &#123;</span><br><span class="line">        SEL selector = <span class="built_in">NSSelectorFromString</span>(selectorString);</span><br><span class="line">        <span class="built_in">NSMethodSignature</span> *signature = [<span class="keyword">self</span> instanceMethodSignatureForSelector:selector];</span><br><span class="line">        <span class="built_in">NSInvocation</span> *invocation = [<span class="built_in">NSInvocation</span> invocationWithMethodSignature:signature];</span><br><span class="line">        invocation.selector = selector;</span><br><span class="line"></span><br><span class="line">        [invocations addObject:invocation];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> invocations;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">NSArray</span>&lt;<span class="built_in">NSString</span> *&gt; *)spekGenerateTestMethodNames &#123;</span><br><span class="line">    <span class="keyword">return</span> @[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h3 id="Generate-test-methods"><a href="#Generate-test-methods" class="headerlink" title="Generate test methods"></a>Generate test methods</h3><p>Calculate based on Describe and It, and use Objc runtime <code>class_addMethod</code> to add instance methods</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">SpekTestCase</span>: <span class="title">SpekHelperTestCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">makeDescribe</span>() -&gt; <span class="title">Describe</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Describe</span>(<span class="string">"empty"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #<span class="keyword">if</span> canImport(<span class="type">SpekHelper</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">spekGenerateTestMethodNames</span>() -&gt; [<span class="title">String</span>] </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> describe = <span class="type">Self</span>.makeDescribe()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> names: [<span class="type">String</span>] = []</span><br><span class="line">        generate(describe: describe, names: &amp;names)</span><br><span class="line">        <span class="keyword">return</span> names</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">addInstanceMethod</span><span class="params">(name: String, closure: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> block: <span class="meta">@convention</span>(block) (<span class="type">SpekTestCase</span>) -&gt; <span class="type">Void</span> = &#123; spekTestCase <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> <span class="number">_</span> = spekTestCase</span><br><span class="line">            closure()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> implementation = imp_implementationWithBlock(block <span class="keyword">as</span> <span class="type">Any</span>)</span><br><span class="line">        <span class="keyword">let</span> selector = <span class="type">NSSelectorFromString</span>(name)</span><br><span class="line">        class_addMethod(<span class="keyword">self</span>, selector, implementation, <span class="string">"v@:"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://github.com/Quick/Quick" target="_blank" rel="noopener">https://github.com/Quick/Quick</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/testing/">testing</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-ObjC-in-Swift-Package-Manager"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-ObjC-in-Swift-Package-Manager/">How to use ObjC in Swift Package Manager</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-ObjC-in-Swift-Package-Manager/" class="article-date">
	  <time datetime="2020-01-11T20:35:09.000Z" itemprop="datePublished">January 11, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/575" target="_blank" rel="noopener">#575</a></strong></p>
<h2 id="Create-Objc-target"><a href="#Create-Objc-target" class="headerlink" title="Create Objc target"></a>Create Objc target</h2><ul>
<li><a href="http://ankit.im/swift/2016/05/21/creating-objc-cpp-packages-with-swift-package-manager/" target="_blank" rel="noopener">http://ankit.im/swift/2016/05/21/creating-objc-cpp-packages-with-swift-package-manager/</a></li>
</ul>
<h2 id="Check-runtime"><a href="#Check-runtime" class="headerlink" title="Check runtime"></a>Check runtime</h2><p>Check  for example <code>_runtime(_ObjC)</code>  or <code>os(macOS</code> if you  plan  to use platform specific feature</p>
<ul>
<li><a href="https://github.com/Quick/Quick/blob/master/Package.swift" target="_blank" rel="noopener">https://github.com/Quick/Quick/blob/master/Package.swift</a></li>
<li><a href="https://github.com/Quick/Quick/pull/687/files" target="_blank" rel="noopener">https://github.com/Quick/Quick/pull/687/files</a></li>
</ul>
<p>For example, in test we use <code>XCTest</code> which is run via Xcode and is a macOS framework, so we need to check for <code>os(macOS)</code></p>
<p>Note that in Objc framework,  the header files must be in <code>include</code> folder</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">targets: &#123;</span><br><span class="line">        <span class="keyword">var</span> targets: [<span class="type">Target</span>] = [</span><br><span class="line">            .testTarget(</span><br><span class="line">                name: <span class="string">"QuickTests"</span>,</span><br><span class="line">                dependencies: [ <span class="string">"Quick"</span>, <span class="string">"Nimble"</span> ],</span><br><span class="line">                exclude: [</span><br><span class="line">                    <span class="string">"QuickAfterSuiteTests/AfterSuiteTests+ObjC.m"</span>,</span><br><span class="line">                    <span class="string">"QuickFocusedTests/FocusedTests+ObjC.m"</span>,</span><br><span class="line">                    <span class="string">"QuickTests/FunctionalTests/ObjC"</span>,</span><br><span class="line">                    <span class="string">"QuickTests/Helpers/QCKSpecRunner.h"</span>,</span><br><span class="line">                    <span class="string">"QuickTests/Helpers/QCKSpecRunner.m"</span>,</span><br><span class="line">                    <span class="string">"QuickTests/Helpers/QuickTestsBridgingHeader.h"</span>,</span><br><span class="line">                    <span class="string">"QuickTests/QuickConfigurationTests.m"</span>,</span><br><span class="line">                ]</span><br><span class="line">            ),</span><br><span class="line">        ]</span><br><span class="line">#<span class="keyword">if</span> os(macOS)</span><br><span class="line">        targets.append(contentsOf: [</span><br><span class="line">            .target(name: <span class="string">"QuickSpecBase"</span>, dependencies: []),</span><br><span class="line">            .target(name: <span class="string">"Quick"</span>, dependencies: [ <span class="string">"QuickSpecBase"</span> ]),</span><br><span class="line">        ])</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">        targets.append(contentsOf: [</span><br><span class="line">            .target(name: <span class="string">"Quick"</span>, dependencies: []),</span><br><span class="line">        ])</span><br><span class="line">#endif</span><br><span class="line">        <span class="keyword">return</span> targets</span><br><span class="line">    &#125;(),</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spm/">spm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-expression-cast-type-in-lldb-in-Swit"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-expression-cast-type-in-lldb-in-Swit/">How to expression cast type in lldb in Swit</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-expression-cast-type-in-lldb-in-Swit/" class="article-date">
	  <time datetime="2020-01-10T07:35:12.000Z" itemprop="datePublished">January 10, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/574" target="_blank" rel="noopener">#574</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">expr -l Swift -- import UIKit</span><br><span class="line">expr -l Swift -- let $collectionView = unsafeBitCast(0x7fddd8180000, to: UICollectionView.self)</span><br><span class="line">expr -l Swift -- $collectionView.safeAreaInsets</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Applications-folder-in-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Applications-folder-in-macOS/">How to use Applications folder in macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Applications-folder-in-macOS/" class="article-date">
	  <time datetime="2020-01-08T21:34:46.000Z" itemprop="datePublished">January 8, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/573" target="_blank" rel="noopener">#573</a></strong></p>
<p>There are 2 Applications folder</p>
<ul>
<li>/System/Applications: contains Notes, Books, Calculator, â€¦</li>
<li>/Applications: contains Safari, Xcode, Keynote, â€¦</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-fix-library-not-found-with-SPM-and-CocoaPods-in-Xcode"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-fix-library-not-found-with-SPM-and-CocoaPods-in-Xcode/">How to fix library not found with SPM and CocoaPods in  Xcode</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-fix-library-not-found-with-SPM-and-CocoaPods-in-Xcode/" class="article-date">
	  <time datetime="2020-01-08T20:49:17.000Z" itemprop="datePublished">January 8, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/572" target="_blank" rel="noopener">#572</a></strong></p>
<p>After migrating a few pods to use SPM, some libraries fail to load. This is because the workspace now uses both SPM and cocoapods</p>
<blockquote>
<p>code signature in â€¦ not valid for use in process using Library Validation: mapped file has no Team ID and is not a platform binary (signed with custom identity or adhoc?)</p>
</blockquote>
<p>The workaround is to disable Library validation</p>
<img width="888" alt="Screenshot 2020-01-08 at 22 48 28" src="https://user-images.githubusercontent.com/2284279/72018966-fe244980-3268-11ea-8d60-5c3e49d39299.png">

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spm/">spm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcode/">xcode</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-rotation-in-same-direction-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-rotation-in-same-direction-in-iOS/">How to make rotation in same direction in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-rotation-in-same-direction-in-iOS/" class="article-date">
	  <time datetime="2020-01-06T14:12:19.000Z" itemprop="datePublished">January 6, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/571" target="_blank" rel="noopener">#571</a></strong></p>
<p>From <code>CGFloat.pi / 2</code> to <code>-CGFloat.pi / 2 + epsilon</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-get-updated-safeAreaInsets-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-get-updated-safeAreaInsets-in-iOS/">How to get updated safeAreaInsets in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-get-updated-safeAreaInsets-in-iOS/" class="article-date">
	  <time datetime="2020-01-06T12:30:09.000Z" itemprop="datePublished">January 6, 2020</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/570" target="_blank" rel="noopener">#570</a></strong></p>
<h1 id="Use-viewSafeArea"><a href="#Use-viewSafeArea" class="headerlink" title="Use viewSafeArea"></a>Use viewSafeArea</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewSafeAreaInsetsDidChange</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewSafeAreaInsetsDidChange()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.collectionView.reloadData()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Use <a href="https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.safeAreaLayoutGuide.layoutFrame</span><br></pre></td></tr></table></figure>

<p><a href="https://developer.apple.com/documentation/uikit/uiview/2891103-safeareainsets" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uiview/2891103-safeareainsets</a></p>
<blockquote>
<p>For the view controllerâ€™s root view, the insets account for the status bar, other visible bars, and any additional insets that you specified using the additionalSafeAreaInsets property of your view controller. For other views in the view hierarchy, the insets reflect only the portion of the view that is covered. For example, if a view is entirely within the safe area of its superview, the edge insets in this property are 0.</p>
</blockquote>
<p>Use UICollectionView.contentInsetAdjustmentBehavior</p>
<h2 id="Nested-view"><a href="#Nested-view" class="headerlink" title="Nested view"></a>Nested view</h2><p>For UICollectionView inside Cell inside UICollectionView, its insets is 0, but its parent parent is correct, which is the original cell</p>
<p>UICollectionView -&gt; Cell -&gt; ContentView -&gt; UICollectionView</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collectionView.superview?.superview?.safeAreaInsets</span><br></pre></td></tr></table></figure>

<p>viewWillAppear: safeAreaInsets is not set to collectionView<br>viewDidAppear: safeAreaInsets is set to collectionView and cells, but not to nested collectionView</p>
<p>In <code>viewSafeAreaInsetsDidChange</code>, invalidate outer and nested <code>collectionViewLayout</code></p>
<h2 id="Use-extendedLayoutIncludesOpaqueBars"><a href="#Use-extendedLayoutIncludesOpaqueBars" class="headerlink" title="Use extendedLayoutIncludesOpaqueBars"></a>Use extendedLayoutIncludesOpaqueBars</h2><p><a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621404-extendedlayoutincludesopaquebars" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uiviewcontroller/1621404-extendedlayoutincludesopaquebars</a></p>
<blockquote>
<p>A Boolean value indicating whether or not the extended layout includes opaque bars.</p>
</blockquote>
<p>Seems to affect left and right insets</p>
<ul>
<li><a href="https://stackoverflow.com/questions/18798792/explaining-difference-between-automaticallyadjustsscrollviewinsets-extendedlayo" target="_blank" rel="noopener">https://stackoverflow.com/questions/18798792/explaining-difference-between-automaticallyadjustsscrollviewinsets-extendedlayo</a></li>
<li><a href="https://medium.com/@wailord/extended-layout-in-ios-pre-ios-11-5eff2debf28" target="_blank" rel="noopener">https://medium.com/@wailord/extended-layout-in-ios-pre-ios-11-5eff2debf28</a></li>
</ul>
<h2 id="Seemingly-related-to-UIPresentationController"><a href="#Seemingly-related-to-UIPresentationController" class="headerlink" title="Seemingly related to UIPresentationController"></a>Seemingly related to UIPresentationController</h2><p>But itâ€™s not, it is because of when safeAreaInsets is available, and how it is passed to nested view</p>
<p>When invalidating collection view layout with custom <code>UIPresentationController</code>, <code>alongsideTransition</code> is called twice, the first time with old <code>safeAreaInsets</code>, and the second time with latest <code>safeAreaInsets</code></p>
<p>And the layout invalidation uses the old insets.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillTransition</span><span class="params">(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewWillTransition(to: size, with: coordinator)</span><br><span class="line">    coordinator.animate(alongsideTransition: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.collectionViewLayout.invalidateLayout()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Dispatch</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIViewController subclass</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillTransition</span><span class="params">(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewWillTransition(to: size, with: coordinator)</span><br><span class="line">    coordinator.animate(alongsideTransition: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            <span class="keyword">self</span>.collectionViewLayout.invalidateLayout()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Call layoutIfNeeded</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIPresentationController subclass</span></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> frameOfPresentedViewInContainerView: <span class="type">CGRect</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> containerView = containerView <span class="keyword">else</span> &#123; <span class="keyword">return</span> .zero &#125;</span><br><span class="line">    </span><br><span class="line">    presentedView?.setNeedsLayout()</span><br><span class="line">    presentedView?.layoutIfNeeded()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ...</span><br></pre></td></tr></table></figure>

<h2 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h2><p>Check that UICollectionView or the view youâ€™re working on is in view hierarchy</p>
<ul>
<li><a href="https://stackoverflow.com/questions/46271186/safe-area-not-work-properly-on-iphone-x-when-subviews-are-not-in-the-view-area" target="_blank" rel="noopener">https://stackoverflow.com/questions/46271186/safe-area-not-work-properly-on-iphone-x-when-subviews-are-not-in-the-view-area</a></li>
</ul>
<p>Check that youâ€™re using code in viewDidLayoutSubviews when safeAreaInsets is known</p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.appcoda.com/presentation-controllers-tutorial/" target="_blank" rel="noopener">https://www.appcoda.com/presentation-controllers-tutorial/</a></li>
<li><a href="https://fluffy.es/4-ios13-breaking-changes/" target="_blank" rel="noopener">https://fluffy.es/4-ios13-breaking-changes/</a></li>
<li><a href="https://developer.apple.com/documentation/uikit/uiview/positioning_content_relative_to_the_safe_area" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uiview/positioning_content_relative_to_the_safe_area</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/2/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Searchâ€¦" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Ohayou</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/onmyway133" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://twitter.com/onmyway133" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:onmyway133@gmail.com?subject=Hello&body=World" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-TabView-with-enum-in-SwiftUI/">How to use TabView with enum in SwiftUI</a></h6>
              <span>February 11, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-build-SwiftUI-style-UICollectionView-data-source-in-Swift/">How to build SwiftUI style UICollectionView data source in Swift</a></h6>
              <span>February 9, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-make-round-border-in-SwiftUI/">How to make round border in SwiftUI</a></h6>
              <span>February 5, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-mock-in-Swift/">How to mock in Swift</a></h6>
              <span>February 4, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-change-background-color-in-List-in-SwiftUI-for-macOS/">How to change background color in List in SwiftUI for macOS</a></h6>
              <span>February 4, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-add-drag-and-drop-in-SwiftUI/">How to add drag and drop in SwiftUI</a></h6>
              <span>February 4, 2020</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/algorithm/" style="font-size: 10px;">algorithm</a> <a href="/tags/android/" style="font-size: 17.78px;">android</a> <a href="/tags/apple-script/" style="font-size: 11.11px;">apple script</a> <a href="/tags/catalyst/" style="font-size: 10px;">catalyst</a> <a href="/tags/ci/" style="font-size: 11.11px;">ci</a> <a href="/tags/cloud/" style="font-size: 10.56px;">cloud</a> <a href="/tags/cocoapods/" style="font-size: 11.67px;">cocoapods</a> <a href="/tags/combine/" style="font-size: 12.22px;">combine</a> <a href="/tags/csharp/" style="font-size: 10px;">csharp</a> <a href="/tags/css/" style="font-size: 10.56px;">css</a> <a href="/tags/dart/" style="font-size: 11.67px;">dart</a> <a href="/tags/database/" style="font-size: 10.56px;">database</a> <a href="/tags/design/" style="font-size: 10.56px;">design</a> <a href="/tags/electron/" style="font-size: 11.67px;">electron</a> <a href="/tags/firebase/" style="font-size: 12.22px;">firebase</a> <a href="/tags/flutter/" style="font-size: 11.67px;">flutter</a> <a href="/tags/git/" style="font-size: 11.11px;">git</a> <a href="/tags/github/" style="font-size: 12.22px;">github</a> <a href="/tags/go/" style="font-size: 10.56px;">go</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/iOS/" style="font-size: 19.44px;">iOS</a> <a href="/tags/javascript/" style="font-size: 18.33px;">javascript</a> <a href="/tags/kotlin/" style="font-size: 16.67px;">kotlin</a> <a href="/tags/layout/" style="font-size: 11.67px;">layout</a> <a href="/tags/life/" style="font-size: 13.33px;">life</a> <a href="/tags/links/" style="font-size: 14.44px;">links</a> <a href="/tags/macOS/" style="font-size: 18.89px;">macOS</a> <a href="/tags/machine-learning/" style="font-size: 10.56px;">machine learning</a> <a href="/tags/maps/" style="font-size: 11.67px;">maps</a> <a href="/tags/networking/" style="font-size: 10px;">networking</a> <a href="/tags/node/" style="font-size: 12.78px;">node</a> <a href="/tags/objc/" style="font-size: 10.56px;">objc</a> <a href="/tags/react/" style="font-size: 11.11px;">react</a> <a href="/tags/react-native/" style="font-size: 15px;">react native</a> <a href="/tags/realm/" style="font-size: 10px;">realm</a> <a href="/tags/rx/" style="font-size: 11.11px;">rx</a> <a href="/tags/script/" style="font-size: 10.56px;">script</a> <a href="/tags/spm/" style="font-size: 12.22px;">spm</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a> <a href="/tags/swiftUI/" style="font-size: 17.22px;">swiftUI</a> <a href="/tags/tech/" style="font-size: 15.56px;">tech</a> <a href="/tags/terminal/" style="font-size: 13.33px;">terminal</a> <a href="/tags/testing/" style="font-size: 13.33px;">testing</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/unity/" style="font-size: 10px;">unity</a> <a href="/tags/voip/" style="font-size: 11.67px;">voip</a> <a href="/tags/watchOS/" style="font-size: 13.89px;">watchOS</a> <a href="/tags/web/" style="font-size: 10.56px;">web</a> <a href="/tags/wwdc/" style="font-size: 10px;">wwdc</a> <a href="/tags/xcode/" style="font-size: 16.11px;">xcode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">50</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">42</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">47</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">35</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apple-script/">apple script</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/catalyst/">catalyst</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/combine/">combine</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csharp/">csharp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dart/">dart</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/">electron</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/firebase/">firebase</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">154</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">37</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/links/">links</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a><span class="tag-list-count">80</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maps/">maps</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/networking/">networking</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/objc/">objc</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/realm/">realm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rx/">rx</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/">script</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spm/">spm</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">235</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swiftUI/">swiftUI</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tech/">tech</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unity/">unity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/voip/">voip</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watchOS/">watchOS</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wwdc/">wwdc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xcode/">xcode</a><span class="tag-list-count">21</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2020 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40119591-5', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->












  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
